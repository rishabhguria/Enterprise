<Window x:Name="ProrataWindow"
        x:Class="Prana.Allocation.Client.Controls.Allocation.Views.CalculateProrataUI"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewModels="clr-namespace:Prana.Allocation.Client.Controls.Allocation.ViewModels"
        xmlns:behaviours="clr-namespace:Prana.Allocation.Client.Behaviours" 
        xmlns:ig="http://schemas.infragistics.com/xaml"
		xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:themes="http://infragistics.com/Themes"
        xmlns:shell="http://schemas.microsoft.com/winfx/2006/xaml/presentation/shell"
        xmlns:customChromeLibrary="clr-namespace:Prana.CustomChromeLibrary;assembly=Prana.CustomChromeLibrary"
        xmlns:editors="http://infragistics.com/Editors"
        DataContext="{DynamicResource CalculateProrataUIViewModel}"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        WindowState="{Binding Path=BringToFront, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
         Title="CalculateProrataUI" SizeToContent="Height" MaxHeight="{Binding Path=WindowHeight}" Width="300" MaxWidth="300" MinWidth="300">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.Allocation.Client;component/NirvanaSkin.xaml"/>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamComboEditor.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamDockManager.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamEditors.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamGrid.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMenu.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMultiColumnCombo.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>

            </ResourceDictionary.MergedDictionaries>

            <viewModels:CalculateProrataUIViewModel x:Key="CalculateProrataUIViewModel"/>
        </ResourceDictionary>
    </Window.Resources>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding Path=CalculatedProrataUILoaded}"/>
        </i:EventTrigger>
        <i:EventTrigger EventName="Closing">
            <i:InvokeCommandAction Command="{Binding Path=FormCloseButton}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>

    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome
            ResizeBorderThickness="6"
            CaptionHeight="22"
            CornerRadius="5"
            GlassFrameThickness="0"/>
    </shell:WindowChrome.WindowChrome>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>

        <!--provide the background for the entire form.  In practice, this appears as the window's resize border, because the title and window content obscure the rest-->
        <Border CornerRadius="2" Grid.RowSpan="3" BorderThickness="5" BorderBrush="#FF212C39" Background="#FFD1D2D4"/>

        <!--title bar-->
        <Border CornerRadius="2" BorderThickness="1" BorderBrush="#FF212C39" Background="#FF212C39">
            <!--Window Icon and Title-->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left">
                <TextBlock Height="22" Margin="5,0,0,0" Foreground="#FFD1D2D4" VerticalAlignment="Center">
                    <TextBlock.Style>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="FontSize" Value="15"/>
                            <Setter Property="Text" Value="Nirvāna"/>
                            <Setter Property="FontFamily" Value="Mulish"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding BringToFront}" Value="Minimized">
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Text" Value="Prorata"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StackPanel>

        </Border>

        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
            <TextBlock Text="Prorata" Height="22" FontSize="15" Foreground="#FF8ABB54" VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock.Style>
                    <Style TargetType="{x:Type TextBlock}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding BringToFront}" Value="Minimized">
                                <Setter Property="Text" Value=""/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            <customChromeLibrary:CaptionButtons  VerticalAlignment="Center" />
        </StackPanel>
        <!--min/max/close buttons-->

        <!--Content-->
        <Grid Grid.Row="1">
            <Grid Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Label Content="Scheme Name" Grid.Row="0" Grid.Column="1" Margin="5,0,5,0" Visibility="{Binding Path=SchemeAttributesVisibility}" HorizontalAlignment="Left" VerticalAlignment="Center" />
                <Label Content="Scheme Basis" Grid.Row="1" Grid.Column="1" Margin="5,0,5,0" Visibility="{Binding Path=SchemeAttributesVisibility}" HorizontalAlignment="Left" VerticalAlignment="Center" />
                <Label Content="Date" Grid.Row="2" Grid.Column="1" Margin="5,0,5,0" HorizontalAlignment="Left" VerticalAlignment="Center" />

                <ig:XamComboEditor Name="cmbboxSchemeName" ToolTip="{Binding SelectedValue}" IsEditable="True" Visibility="{Binding Path=SchemeAttributesVisibility}" Grid.Row="0" Grid.Column="2" Margin="5,5,5,5" HorizontalAlignment="Left" VerticalAlignment="Center" Width="100" ItemsSource="{Binding Path=SchemeNameCollection, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" CustomValueEnteredAction="Add" SelectedItem="{Binding Path=SelectedSchemeName, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                <i:Interaction.Behaviors>
                    <behaviours:CustomValueXamComboEditorBehavior />
                </i:Interaction.Behaviors>
                </ig:XamComboEditor>

                <ComboBox x:Name="cmbboxSchemeBasis" ToolTip="{Binding SelectedValue}" IsEditable="True" IsReadOnly="True" Visibility="{Binding Path=SchemeAttributesVisibility}" Grid.Row="1" Grid.Column="2" Margin="5,5,5,5" HorizontalAlignment="Left" VerticalAlignment="Center" Width="100" ItemsSource="{Binding Path=SchemeBasisCollection,UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedSchemeBasis, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Template="{DynamicResource ComboBoxEditableTemplate}">
                <i:Interaction.Behaviors>
                    <behaviours:CustomValueComboBoxBehavior />
                </i:Interaction.Behaviors>
                </ComboBox>
                <editors:XamDateTimeEditor x:Name="FromDate" Grid.Row="2" Grid.Column="2"  Margin="5,5,5,5"  Height="25" Validation.ErrorTemplate="{x:Null}" AutoFillDate="MonthAndYear" DropDownButtonDisplayMode="OnlyInEditMode" Text="{Binding SelectedDate,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
            </Grid>      
        </Grid>
        <Button x:Name="btnContinue" Content="Continue" Margin="0,0,0,10" Grid.Row="2" Grid.Column="3"  Height="30" HorizontalAlignment="Center" Template="{DynamicResource ButtonControlTemplate}" Foreground="{DynamicResource ButtonForeground}">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <i:InvokeCommandAction Command="{Binding Path=StartCalculateProrata}" CommandParameter="{Binding ElementName=ProrataWindow}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Button>
    </Grid>
</Window>
