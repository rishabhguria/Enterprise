<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:ig="http://infragistics.com/Editors"
             xmlns:viewModels="clr-namespace:Prana.Rebalancer.RebalancerNew.ViewModels"
             xmlns:themes="http://infragistics.com/Themes"
             x:Class="Prana.Rebalancer.RebalancerNew.Views.AddModelPortfolioView" 
             mc:Ignorable="d"
             x:Name="UserControl">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.Rebalancer;component/PercentTradingTool/Themes/generic.xaml" />
                <ResourceDictionary Source="/Prana.Rebalancer;component/PercentTradingTool/Themes/NirvanaSkin.xaml" />
                <ResourceDictionary Source="/Prana.Rebalancer;component/PercentTradingTool/Themes/NirvanaErrorTemplate.xaml" />
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Rebalancer;component/PercentTradingTool/Themes/IG/IG.xamComboEditor.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Rebalancer;component/PercentTradingTool/Themes/IG/DataPresenterIGTheme_Express.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
            </ResourceDictionary.MergedDictionaries>
            <ObjectDataProvider MethodName="GetPortfolioTypeList"
                                ObjectType="{x:Type viewModels:AddModelPortfolioViewModel}"
                                x:Key="PortfolioTypeList">
            </ObjectDataProvider>
            <Style x:Key="ButtonStyle" TargetType="Button">
                <Setter Property="Template" Value="{DynamicResource ButtonControlTemplate}"/>
                <Setter Property="Width" Value="75"/>
                <Setter Property="Height" Value="20"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="Margin" Value="20,0,0,0"/>
            </Style>
            <Style x:Key="ImportModelPortfolioButtonStyle" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
                <Setter Property="Width" Value="145"/>
                <Setter Property="Margin" Value="5,0,0,0"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Visibility, ElementName=AccountPanel}" Value="Collapsed">
                        <Setter Property="Button.Visibility" Value="Visible"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Visibility, ElementName=AccountPanel}" Value="Visible">
                        <Setter Property="Button.Visibility" Value="Collapsed"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <StackPanel x:Name="InfoPanel" Grid.Row="0" Grid.Column="0" Orientation="Horizontal" Margin="0,0,0,15">
            <Label Content="Model Portfolio" Width="95"/>
            <ig:XamComboEditor  Height="22" Width="200"/>
            <Button Content="Save" Command="{Binding SavePortfolioCommand}" Style="{StaticResource ButtonStyle}"/>
            <Button Content="New"  Command="{Binding SavePortfolioCommand}" Click="OnNewButtonClicked" Style="{StaticResource ButtonStyle}"/>
            <Button Content="Delete" Command="{Binding SavePortfolioCommand}" Style="{StaticResource ButtonStyle}"/>
        </StackPanel>
        <StackPanel Grid.Row="1" Grid.Column="0 "  Orientation="Horizontal" Margin="0,0,0,15">
            <Label  Content="Portfolio Name" Width="95"/>
            <TextBox Height="22" Width="200" TextWrapping="Wrap"/>
            <StackPanel Orientation="Horizontal" x:Name="AddButtonsPanel" Visibility="Collapsed">
                <Button Content="Save"  Style="{StaticResource ButtonStyle}" Command="{Binding SavePortfolioCommand}"/>
                <Button Content="Cancel" Style="{StaticResource ButtonStyle}" HorizontalAlignment="Left" Click="OnCancelButtonClicked" />
            </StackPanel>
        </StackPanel>
        <StackPanel Grid.Row="2" Grid.Column="0 "  Orientation="Horizontal" Margin="0,0,0,15">
            <Label Width="95" Content="Portfolio Type"/>
            <ig:XamComboEditor x:Name="PortfolioTypeCombo" Height="22" Width="200" ItemsSource="{Binding Source={StaticResource PortfolioTypeList}}" SelectedItem="Account"/>
        </StackPanel>
        <StackPanel x:Name="AccountPanel" Grid.Row="3" Grid.Column="0" FlowDirection="LeftToRight" Orientation="Horizontal">
            <Label Content="{Binding SelectedItem,ElementName=PortfolioTypeCombo}" Width="95" />
            <ig:XamComboEditor Height="22" Width="200"/>
            <Button Style="{StaticResource ButtonStyle}" Content="View" Command="{Binding ViewCommand}"/>
            <StackPanel.Style>
                <Style>
                    <Style.Triggers>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding SelectedItem,ElementName=PortfolioTypeCombo}" Value="Account"/>
                                <Condition Binding="{Binding SelectedItem,ElementName=PortfolioTypeCombo}" Value="Master Fund"/>
                            </MultiDataTrigger.Conditions>
                            <MultiDataTrigger.Setters>
                                <Setter Property="StackPanel.Visibility" Value="Visible"/>
                            </MultiDataTrigger.Setters>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding SelectedItem,ElementName=PortfolioTypeCombo}" Value="Model Portfolio"/>
                            </MultiDataTrigger.Conditions>
                            <MultiDataTrigger.Setters>
                                <Setter Property="StackPanel.Visibility" Value="Collapsed"/>
                            </MultiDataTrigger.Setters>
                        </MultiDataTrigger>
                    </Style.Triggers>
                </Style>
            </StackPanel.Style>
        </StackPanel>
        <Button Grid.Row="4"  Grid.Column="0" x:Name="ImportModelPortfolioButton" Command="{Binding ImportModelPortfolioCommand}" Padding="10,0,10,0" Style="{StaticResource ImportModelPortfolioButtonStyle}" HorizontalAlignment="Left" Content="Import Model Portfolio"/>
    </Grid>
</UserControl>
