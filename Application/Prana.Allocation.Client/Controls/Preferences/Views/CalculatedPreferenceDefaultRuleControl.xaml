<UserControl xmlns:ig="http://schemas.infragistics.com/xaml"  xmlns:igWPF="http://schemas.infragistics.com/xaml/wpf"  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             x:Class="Prana.Allocation.Client.Controls.Preferences.Views.CalculatedPreferenceDefaultRuleControl" 
             xmlns:viewModels="clr-namespace:Prana.Allocation.Client.Controls.Preferences.ViewModels"
             xmlns:Constants="clr-namespace:Prana.Allocation.Client.Constants"
             xmlns:commonBehaviors="clr-namespace:Prana.Allocation.Client.Behaviours" 
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:Core="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d"
             DataContext="{DynamicResource CalculatedPreferenceDefaultRuleControlViewModel}" Background="{DynamicResource UserControlBackGround}" IsEnabled="{Binding Path=IsPrefDefaultRuleControlEnabled}">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.Allocation.Client;component/NirvanaSkin.xaml"/>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamComboEditor.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamDockManager.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamEditors.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamGrid.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMenu.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMultiColumnCombo.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>
            </ResourceDictionary.MergedDictionaries>
            <viewModels:CalculatedPreferenceDefaultRuleControlViewModel x:Key="CalculatedPreferenceDefaultRuleControlViewModel"/>
            <Style  x:Key="DateEditorStyle" TargetType="{x:Type igWPF:XamNumericEditor}">
                <Setter Property="IsEnabled" Value="False"></Setter>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=cmbboxTargetPercentageId, Path=SelectedItem.DisplayText}" Value="Prorata">
                        <Setter Property="IsEnabled" Value="True"></Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style  x:Key="AccountListStyle" TargetType="{x:Type ig:XamComboEditor}" BasedOn="{StaticResource igXamComboEditorStyle}">
                <Setter Property="IsEnabled" Value="False"></Setter>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=cmbboxTargetPercentageId, Path=SelectedItem.DisplayText}" Value="Prorata">
                        <Setter Property="IsEnabled" Value="True"></Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ElementName=cmbboxTargetPercentageId, Path=SelectedItem.DisplayText}" Value="Leveling">
                        <Setter Property="IsEnabled" Value="True"></Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ElementName=cmbboxTargetPercentageId, Path=SelectedItem.DisplayText}" Value="Pro-rata (NAV)">
                        <Setter Property="IsEnabled" Value="True"></Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style  x:Key="AllocationMethodStyle" TargetType="{x:Type ComboBox}">
                <Setter Property="IsEnabled" Value="True"></Setter>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=cmbboxTargetPercentageId, Path=SelectedItem.DisplayText}" Value="Prorata">
                        <Setter Property="IsEnabled" Value="False"></Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ElementName=cmbboxTargetPercentageId, Path=SelectedItem.DisplayText}" Value="Leveling">
                        <Setter Property="IsEnabled" Value="False"></Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ElementName=cmbboxTargetPercentageId, Path=SelectedItem.DisplayText}" Value="Pro-rata (NAV)">
                        <Setter Property="IsEnabled" Value="False"></Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" MinWidth="150"/>
                    <ColumnDefinition Width="Auto" MinWidth="150"/>
                    <ColumnDefinition Width="Auto" MinWidth="150"/>
                    <ColumnDefinition Width="Auto" MinWidth="150"/>
                    <ColumnDefinition Width="Auto" MinWidth="150"/>
                    <ColumnDefinition Width="Auto" MinWidth="0"/>
                </Grid.ColumnDefinitions>
                <TextBlock Name="txtblockAllocationMethod" Text="Allocation Method" Grid.Row="0" Grid.Column="0" TextAlignment="Center" FontWeight="Bold"/>
                <TextBlock Name="txtblockRemainderAllocation" Text="Remainder Allocation to" Grid.Row="0" Grid.Column="1" TextAlignment="Center" FontWeight="Bold"/>
                <TextBlock Name="txtblockTargetPercent" Text="Target % as of" Grid.Row="0" Grid.Column="2" TextAlignment="Center" FontWeight="Bold"/>
                <TextBlock Name="txtblockProrataAccount" Text="Account for Prorata/Leveling" Grid.Row="0" Grid.Column="3" TextAlignment="Center" FontWeight="Bold"/>
                <TextBlock Name="txtblockDateUptoDays" Text="Date up to Days" Grid.Row="0" Grid.Column="4" TextAlignment="Center" FontWeight="Bold"/>
            <TextBlock Name="txtblockClosingTransaction" Text="Match Closing Transaction exactly" Grid.Row="0" Grid.Column="5" TextAlignment="Center" FontWeight="Bold" Visibility="{Binding Path=IsVisibleButtonForMF}"/>
            <ComboBox Name="cmbboxAllocationMethodId" ToolTip="{Binding SelectedItem.DisplayText, RelativeSource={RelativeSource Self}}" IsEditable="True" IsReadOnly="True" Grid.Row="1" Grid.Column="0" Margin="5,5,5,5" ItemsSource="{Binding Path=AllocationTypeCollection}" SelectedItem="{Binding Path=SelectedAllocationType, Mode=TwoWay}" DisplayMemberPath="DisplayText" BorderBrush="{x:Null}" Foreground="Black" Background="White" IsSynchronizedWithCurrentItem="True" Template="{DynamicResource ComboBoxEditableTemplate}" Style="{StaticResource AllocationMethodStyle}">
                <ComboBox.ItemContainerStyle>
                    <Style>
                        <Setter Property="Control.ToolTip" Value="{Binding DisplayText}" />
                    </Style>
                </ComboBox.ItemContainerStyle>
            </ComboBox>
            <ComboBox Name="cmbboxRemainderAllocationId" ToolTip="{Binding SelectedItem.Value, RelativeSource={RelativeSource Self}}" IsEditable="True" IsReadOnly="True" Grid.Row="1" Grid.Column="1" Margin="5,5,5,5" SelectedItem="{Binding Path=SelectedRemainderAllocationAccount}" ItemsSource="{Binding Path=Accounts, Mode=TwoWay}" DisplayMemberPath="Value" BorderBrush="{x:Null}" Background="White" IsSynchronizedWithCurrentItem="True" Template="{DynamicResource ComboBoxEditableTemplate}">
             <ComboBox.ItemContainerStyle>
                    <Style>
                        <Setter Property="Control.ToolTip" Value="{Binding Value}" />
                    </Style>
                </ComboBox.ItemContainerStyle>
            </ComboBox>   
                <ComboBox Name="cmbboxTargetPercentageId" ToolTip="{Binding SelectedItem.DisplayText, RelativeSource={RelativeSource Self}}" IsEditable="True" IsReadOnly="True" Grid.Row="1" Grid.Column="2" Margin="5,5,5,5" ItemsSource="{Binding Path=MatchingRuleTypeCollection}" SelectedItem="{Binding Path=SelectedMatchingRuleType, Mode=TwoWay}" DisplayMemberPath="DisplayText" BorderBrush="{x:Null}" Background="White" IsSynchronizedWithCurrentItem="True" Template="{DynamicResource ComboBoxEditableTemplate}">
                <ComboBox.ItemContainerStyle>
                    <Style>
                        <Setter Property="Control.ToolTip" Value="{Binding DisplayText}" />
                    </Style>
                </ComboBox.ItemContainerStyle>
            </ComboBox>
            <ig:XamComboEditor Name="cmbboxProrataAccountsId" ToolTip="{Binding SelectedValues, ElementName=ComboEditorBehavior}" IsEditable="True" AllowMultipleSelection="True" CheckBoxVisibility="Visible" EmptyText="Select" Grid.Row="1" Grid.Column="3" Width="150" Margin="5,5,5,5" ItemsSource="{Binding Path=AccountsForProrata, Mode=TwoWay}" DisplayMemberPath="Value" SelectedItems="{Binding Path=SelectedProrataAccount}" Style="{StaticResource AccountListStyle}">
                <ig:XamComboEditor.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Value}" ToolTip="{Binding Value}" Width="Auto"/>
                    </DataTemplate>
                </ig:XamComboEditor.ItemTemplate>
                <i:Interaction.Behaviors>
                    <commonBehaviors:XamComboEditorBehavior x:Name="ComboEditorBehavior" SelectedItems ="{Binding Path=SelectedProrataAccount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                    </i:Interaction.Behaviors>
                </ig:XamComboEditor>
            <igWPF:XamNumericEditor Name="txtboxDateUptoDaysId" Margin="5,5,5,5" Grid.Row="1" Grid.Column="4" SpinButtonDisplayMode="Always" PromptChar=" " ValueType="Core:Int32" Value="{Binding Path=DateUptoDays, Mode=TwoWay}" Mask="{x:Static Constants:AllocationClientConstants.INTEGER_MASK}" Style="{StaticResource DateEditorStyle}">
                    <igWPF:XamNumericEditor.ValueConstraint>
                        <igWPF:ValueConstraint MinInclusive="0"/>
                    </igWPF:XamNumericEditor.ValueConstraint>
                <i:Interaction.Behaviors>
                    <commonBehaviors:XamNumericEditorBehaviour/>
                </i:Interaction.Behaviors>
            </igWPF:XamNumericEditor>
            <ComboBox Name="cmbboxMatchClosingTransactionId" ToolTip="{Binding SelectedItem.DisplayText, RelativeSource={RelativeSource Self}}" IsEditable="True" IsReadOnly="True" Grid.Row="1" Grid.Column="5" Margin="5,5,5,5" ItemsSource="{Binding Path=MatchClosingCollection}" SelectedItem="{Binding Path=SelectedMatchClosing}" DisplayMemberPath="DisplayText" Background="White" BorderBrush="{x:Null}" IsSynchronizedWithCurrentItem="True" Template="{DynamicResource ComboBoxEditableTemplate}" Visibility="{Binding Path=IsVisibleButtonForMF}">
                <ComboBox.ItemContainerStyle>
                    <Style>
                        <Setter Property="Control.ToolTip" Value="{Binding DisplayText}" />
                    </Style>
                </ComboBox.ItemContainerStyle>
            </ComboBox>
        </Grid>
    </Grid>
</UserControl>
