<UserControl xmlns:igWPF="http://schemas.infragistics.com/xaml/wpf"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:viewModels="clr-namespace:Prana.Allocation.Client.Controls.Preferences.ViewModels"
             xmlns:behaviours="clr-namespace:Prana.Allocation.Client.Controls.Preferences.Behaviours"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:ig="http://schemas.infragistics.com/xaml"
             xmlns:igPrim="http://schemas.infragistics.com/xaml/primitives"
             xmlns:igEditors="http://infragistics.com/Editors"
             x:Class="Prana.Allocation.Client.Controls.Preferences.Views.PreferenceAccountStrategyControl" 
             mc:Ignorable="d" 
             DataContext="{DynamicResource PreferenceAccountStrategyControlViewModel}" Background="{DynamicResource UserControlBackGround}" IsEnabled="{Binding Path=IsPrefAccountStrategyEnabled}">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.Allocation.Client;component/NirvanaSkin.xaml"/>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamComboEditor.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamDockManager.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamEditors.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamGrid.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMenu.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>
                <igWPF:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <igWPF:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMultiColumnCombo.xaml" />
                    </igWPF:ResourceWasher.SourceDictionary>
                </igWPF:ResourceWasher>

            </ResourceDictionary.MergedDictionaries>

            <viewModels:PreferenceAccountStrategyControlViewModel x:Key="PreferenceAccountStrategyControlViewModel"/>
            <igPrim:SummaryResultFormatStringValueConverter x:Key="SDFormatStringConverter"></igPrim:SummaryResultFormatStringValueConverter>
        </ResourceDictionary>
    </UserControl.Resources>
        <Grid>
            <ig:XamGrid x:Name="AccountStrategyGrid" ItemsSource="{Binding Path=AccountStartegyTable, Mode=TwoWay}" AutoGenerateColumns="False" ColumnWidth="100">
                <ig:XamGrid.Resources>
                    <Style x:Key="FillerColHeader" TargetType="{x:Type igPrim:HeaderCellControl}">
                        <Setter Property="Visibility" Value="Collapsed"/>
                    </Style>
                    <Style x:Key="FillerColCellStyle" TargetType="ig:CellControl">
                        <Setter Property="Visibility" Value="Collapsed"/>
                    </Style>
                    <Style x:Key="DisableEnableCellStyle" TargetType="ig:CellControl"  BasedOn="{StaticResource CellControlStyle}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Account_%}" Value="0">
                                <Setter Property="IsEnabled" Value="False"/>
                                <Setter Property="Foreground" Value="Gray"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                    <Style x:Key="SummaryRowCellsStyle" TargetType="igPrim:SummaryRowCellControl">
                        <Setter Property="SummaryDisplayTemplate">
                            <Setter.Value>
                                <DataTemplate>
                                    <TextBlock HorizontalAlignment="Right" Text="{Binding Converter={StaticResource SDFormatStringConverter}}" />
                                </DataTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    <Style TargetType="{x:Type igEditors:XamNumericEditor}">
                        <Setter Property="Mask" Value="{Binding Path=DataContext.PrecisionFormat, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Setter Property="PromptChar" Value=""/>
                        <Setter Property="HorizontalAlignment" Value="Stretch" />
                    </Style>
                </ig:XamGrid.Resources>
                <ig:XamGrid.SummaryRowSettings>
                    <ig:SummaryRowSettings AllowSummaryRow="Bottom" SummaryScope="ColumnLayout"  SummaryExecution="PriorToFilteringAndPaging" Style="{StaticResource SummaryRowCellsStyle}"/>
                </ig:XamGrid.SummaryRowSettings>
                <ig:XamGrid.SortingSettings>
                    <ig:SortingSettings AllowSorting="True" FirstSortDirection="Descending"/>
                </ig:XamGrid.SortingSettings>
                <ig:XamGrid.EditingSettings>
                    <ig:EditingSettings AllowEditing="Cell" IsMouseActionEditingEnabled="SingleClick" IsOnCellActiveEditingEnabled="True" />
                </ig:XamGrid.EditingSettings>
                <ig:XamGrid.FillerColumnSettings>
                    <ig:FillerColumnSettings Style="{StaticResource FillerColCellStyle}" HeaderStyle="{StaticResource FillerColHeader}"/>
                </ig:XamGrid.FillerColumnSettings>
                <ig:XamGrid.ColumnMovingSettings>
                    <ig:ColumnMovingSettings AllowColumnMoving="Indicator"/>
                </ig:XamGrid.ColumnMovingSettings>
                <ig:XamGrid.FixedColumnSettings>
                    <ig:FixedColumnSettings AllowFixedColumns="Indicator"/>
                </ig:XamGrid.FixedColumnSettings>
            <ig:XamGrid.FilteringSettings>
                <ig:FilteringSettings FilteringScope="ColumnLayout" AllowFiltering="FilterRowTop" IsMouseActionEditingEnabled="SingleClick" IsEnterKeyEditingEnabled="True">
                </ig:FilteringSettings>
            </ig:XamGrid.FilteringSettings>            
            <i:Interaction.Behaviors>
                <behaviours:PreferenceAccountStrategyGridBehavior ExportDataPathAutomation="{Binding Path=ExportPathForAutomation, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsAccountStrategyGridExport="{Binding Path=ExportAccountAndStrategyGrid, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" AccountValueDictionary ="{Binding Path=AccountValueDictionary, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsRefreshSummary="{Binding Path=IsRefreshSummary, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" EndEditMode="{Binding Path=EndEditMode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            </i:Interaction.Behaviors>
        </ig:XamGrid>
    </Grid>
</UserControl>
