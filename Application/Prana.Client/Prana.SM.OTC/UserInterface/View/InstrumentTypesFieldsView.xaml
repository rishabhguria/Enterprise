<Window x:Class="Prana.SM.OTC.View.InstrumentTypesFieldsView"  ShowInTaskbar="False"
         x:Name="InstrumentTypesFieldsViewUI"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:custom="http://infragistics.com/Windows"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:shell="http://schemas.microsoft.com/winfx/2006/xaml/presentation/shell"
        xmlns:views="clr-namespace:Prana.SM.OTC.View"
        xmlns:igWPF="http://schemas.infragistics.com/xaml/wpf"  
        xmlns:customChromeLibrary="clr-namespace:Prana.CustomChromeLibrary;assembly=Prana.CustomChromeLibrary"
        mc:Ignorable="d"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:viewModels="clr-namespace:Prana.SM.OTC"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:igEditors="http://infragistics.com/Editors"
        xmlns:ig="http://schemas.infragistics.com/xaml"
         xmlns:Themes="http://infragistics.com/Themes"  
        xmlns:md="https://github.com/fantasticfiasco/mvvm-dialogs" 
      md:DialogServiceViews.IsRegistered="True" 
        WindowState="{Binding Path=BringToFront, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
         DataContext="{DynamicResource InstrumentTypeFieldsViewModel}"
        Title="[Instrument Type Field View]"  Width="800" Height="600">
    <!--md:DialogServiceViews.IsRegistered="True" 
          WindowState="{Binding Path=BringToFront, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
         WindowStartupLocation="CenterOwner"-->
    <!--ShowInTaskbar="False"-->

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.SM.OTC;component/Themes/NirvanaSkin.xaml" />
                <ResourceDictionary Source="/Prana.SM.OTC;component/Themes/OTCTemplatesTheme.xaml" />
                <Themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <Themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.SM.OTC;component/Themes/IG/IG.xamComboEditor.xaml" />
                    </Themes:ResourceWasher.SourceDictionary>
                </Themes:ResourceWasher>
                <Themes:ResourceWasher WashMode="HueSaturationReplacement">
                    <Themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.SM.OTC;component/Themes/IG/DataPresenterIGTheme_Express.xaml" />
                    </Themes:ResourceWasher.SourceDictionary>
                </Themes:ResourceWasher>
            </ResourceDictionary.MergedDictionaries>
            <viewModels:InstrumentTypeFieldsViewModel x:Key="InstrumentTypeFieldsViewModel"/>
            <Style x:Key="ButtonStyle" TargetType="{x:Type Button}">
                <Setter Property="Template" Value="{DynamicResource ButtonControlTemplate}"/>
                <Setter Property="Height" Value="25"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="Margin" Value="10" />
                <Setter Property="FontFamily" Value="Tahoma" />
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="FontStyle" Value="Normal"/>
            </Style>

            <Style x:Key="ButtonStyleSaveButton" TargetType="{x:Type Button}">
                <Setter Property="Template" Value="{DynamicResource GreenButtonSkinTemplate}"/>
                <Setter Property="Height" Value="25"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="Margin" Value="10" />
                <Setter Property="FontFamily" Value="Tahoma" />
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="FontStyle" Value="Normal"/>
            </Style>

            <Style x:Key="buttonInCellStyle" TargetType="{x:Type igWPF:CellValuePresenter}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type igWPF:CellValuePresenter}">
                            <Button HorizontalAlignment="Center" Content="View\Edit" Name="ViewTemplate" Style="{StaticResource ButtonStyle}"  Margin="0"  Width="80"  Height="25"
                                    Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type igWPF:XamDataGrid}}, Path=DataContext.ViewButtonClickedCommand}"
                                     CommandParameter="{Binding DataItem}" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="DeleteButtonInCellStyle" TargetType="{x:Type igWPF:CellValuePresenter}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type igWPF:CellValuePresenter}">
                            <Button HorizontalAlignment="Center" Content="Delete" Name="Delete" Style="{StaticResource ButtonStyle}" Margin="0"  Width="80" Height="25"
                                    Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type igWPF:XamDataGrid}}, Path=DataContext.DeleteButtonClickedCommand}"
                                     CommandParameter="{Binding DataItem}" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>

    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome
            ResizeBorderThickness="6"
            CaptionHeight="22"
            CornerRadius="5"
            GlassFrameThickness="0" />
    </shell:WindowChrome.WindowChrome>

    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Closing">
            <i:InvokeCommandAction Command="{Binding Path=FormCloseButton}" PassEventArgsToCommand="True"/>
        </i:EventTrigger>
        <i:EventTrigger EventName="Closed">
            <i:InvokeCommandAction Command="{Binding Path=FormClosed}" PassEventArgsToCommand="False"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>

    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Border CornerRadius="2" BorderThickness="5" BorderBrush="#FF212C39" Background="#58585A" Grid.RowSpan="2" />
        <Border CornerRadius="2" Grid.Row="0" BorderThickness="1" BorderBrush="#FF212C39" Background="#FF212C39">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left">
                <TextBlock x:Name="tbNirvana" Height="22" Margin="5,0,0,0" Foreground="#FFD1D2D4" VerticalAlignment="Center" >
                    <TextBlock.Style>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="FontSize" Value="15"/>
                            <Setter Property="Text" Value="Nirvana"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ElementName=InstrumentTypesFieldsViewUI, Path=WindowState}" Value="Minimized">
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Text" Value="InstrumentTypesFieldsViewUI"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StackPanel>
        </Border>
        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
            <TextBlock Text="Instrument Type Fields" Height="22" FontSize="14" Foreground="#FF8ABB54" VerticalAlignment="Center" HorizontalAlignment="Center" />
            <customChromeLibrary:CaptionButtons  VerticalAlignment="Center" />
        </StackPanel>

        <DockPanel Margin="5,0,5,5" Grid.Row="1" Grid.Column="0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">

            <Grid Background="#FFE7E8E9" >
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <igWPF:XamDataGrid Name="MasterFundRatioDataGrid"  Grid.Row="0" 
                           DataSource="{Binding Path=CustomOTCFieldData, Mode=TwoWay}" 
                           GroupByAreaLocation="None" ScrollingMode="Immediate" 
                           ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" 
                           VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="#FFE7E8E9">
                    <igWPF:XamDataGrid.FieldLayouts>
                        <igWPF:FieldLayout>
                            <igWPF:Field Name="Selected"  Label="Select" Visibility="{Binding Source={StaticResource InstrumentTypeFieldsViewModel},Mode=TwoWay, Path=IsShowHideControls, UpdateSourceTrigger=PropertyChanged}" >
                                <igWPF:Field.Settings >
                                    <igWPF:FieldSettings 
                                          EditAsType="{x:Type sys:Boolean}" 
                                          EditorType="{x:Type igEditors:XamCheckEditor}"/>
                                </igWPF:Field.Settings>
                            </igWPF:Field>
                            <igWPF:Field  AllowEdit="False" Name="Name" Label="Name" Height="30"  />
                            <igWPF:Field AllowEdit="False" Name="DefaultValue" Label="Default Value" Height="30"  />
                            <igWPF:Field AllowEdit="False" Name="DataType" Label="Type" Height="30"  />
                            <igWPF:Field AllowEdit="False" Name="InstrumentType" Label="Instrument Type" Height="30"  />
                            <igWPF:Field AllowEdit="False" Name="UIOrder" Label="UI Order" Height="30"  />
                            <igWPF:Field AllowEdit="False" Name="View" Label="View\Edit" Height="30"  >
                                <igWPF:Field.Settings >
                                    <igWPF:FieldSettings  Height="30"  CellValuePresenterStyle="{StaticResource buttonInCellStyle}" />
                                </igWPF:Field.Settings>
                            </igWPF:Field>
                            <igWPF:Field AllowEdit="False" Name="Delete" Label="Delete">
                                <igWPF:Field.Settings>
                                    <igWPF:FieldSettings   Height="30"  CellValuePresenterStyle="{StaticResource DeleteButtonInCellStyle}" />
                                </igWPF:Field.Settings>
                            </igWPF:Field>
                        </igWPF:FieldLayout>
                    </igWPF:XamDataGrid.FieldLayouts>
                    <igWPF:XamDataGrid.FieldLayoutSettings>
                        <igWPF:FieldLayoutSettings AutoGenerateFields="False" HighlightAlternateRecords="True" RecordSelectorLocation="None" AllowFieldMoving="No" AutoFitMode="Always" />
                    </igWPF:XamDataGrid.FieldLayoutSettings>
                </igWPF:XamDataGrid>
                <StackPanel Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <WrapPanel>
                        <Button Grid.Column="0" Grid.Row="0" Margin="5,10" HorizontalAlignment="Center" Content="Add New Field" Width="150" Name="AddNewField" Style="{StaticResource ButtonStyle}"   Command="{Binding AddbtnAddNewCustomFieldCommandCommand}" />
                        <Button Grid.Column="1" Grid.Row="0" Margin="5,10" HorizontalAlignment="Center" Content="Add to Template" Width="150" x:Name="Save" Style="{StaticResource ButtonStyle}"  Command="{Binding SaveCustomFieldCommandCommand}"  CommandParameter="{Binding ElementName=InstrumentTypesFieldsViewUI}" Visibility="{Binding Source={StaticResource InstrumentTypeFieldsViewModel},Mode=TwoWay, Path=IsShowHideControls, UpdateSourceTrigger=PropertyChanged}" />
                    </WrapPanel>
                </StackPanel>

            </Grid>
        </DockPanel>
    </Grid>

</Window>


