<ResourceDictionary
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:igDP="http://infragistics.com/DataPresenter"
  xmlns:controls="http://infragistics.com/Windows"
  xmlns:editors="http://infragistics.com/Editors"
  xmlns:converters="clr-namespace:Prana.Rebalancer.Converters"
  xmlns:system="clr-namespace:System;assembly=mscorlib"
  x:Class="Prana.Rebalancer.RebalancerNew.Themes.RebalancerTheme">

    <system:String x:Key="StringFormatForPerecentage">{0:#,0.00}%</system:String>
    <system:String x:Key="StringFormatForDecimal">{0:#,0.00}</system:String>
    <system:String x:Key="StringFormatForInteger">{0:#,0}</system:String>
    <SolidColorBrush x:Key="SelectedRowColor" Color="#3f3f40"></SolidColorBrush>
    <controls:NotBoolToVisibilityConverter x:Key="NotBoolToVisConverter" />
    <Style TargetType="{x:Type controls:ExpanderBar}" x:Key="ExpanderStyle">
        <Setter Property="BackgroundHover" Value="Green"/>
        <Setter Property="Height" Value="0"/>
        <Setter Property="Width" Value="0"/>
    </Style>
    <Style TargetType="{x:Type igDP:DataRecordPresenter}" x:Key="DataRecordPresenterStyle">
        <Setter Property="HeaderAreaBackground" Value="WhiteSmoke"></Setter>
    </Style>
    <Style TargetType="TextBlock" x:Key="GridTextBlockStyle">
        <Setter Property="Foreground" Value="Black"/>
        <Style.Triggers>
            <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type igDP:DataRecordCellArea}},Path=Record.IsActive}" Value="True">
                <Setter Property="TextBlock.Foreground" Value="White"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <Style TargetType="{x:Type igDP:RecordSelector}" x:Key="RecordSelectorStyle" >
        <Setter Property="Visibility" Value="Hidden"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Background" Value="WhiteSmoke"/>
    </Style>
    <Style TargetType="{x:Type igDP:LabelPresenter}" x:Key="LabelPresenterStyle" >
        <Setter Property="Background" >
            <Setter.Value>
                <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                    <GradientStop Color="GhostWhite" Offset="0"/>
                    <GradientStop Color="LightGray" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="OuterBorderBrush" Value="LightGray"/>
        <Setter Property="InnerBorderBrush" Value="LightGray"/>
        <Setter Property="LabelHighlight" Value="LightGray"/>
        <Setter Property="FontWeight" Value="Medium"/>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="MinHeight" Value="25"/>
        <Setter Property="FontFamily" Value="Tahoma" />
    </Style>
    <Style TargetType="{x:Type igDP:CellValuePresenter}" x:Key="CellValuePresenterStyleForGrid">
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="FontFamily" Value="Tahoma"/>
        <Setter Property="FontSize" Value="12"/>
        <Setter Property="BackgroundHover" Value="Transparent"/>
        <Setter Property="BackgroundSelected" Value="Transparent"/>
        <Setter Property="BackgroundActive" Value="Transparent"/>
        <Setter Property="BorderActiveBrush" Value="Transparent"/>
        <Setter Property="BorderHoverBrush" Value="Transparent"/>
        <Setter Property="BorderSelectedBrush" Value="Transparent"/>
    </Style>
    <Style TargetType="{x:Type igDP:SummaryResultPresenter}" x:Key="SummaryResultPresenterStyleForGrid">
        <Setter Property="TextBlock.FontWeight" Value="Normal" />
        <Setter Property="TextBlock.TextAlignment" Value="Right"/>
        <Setter Property="TextBlock.FontSize" Value="12"/>
        <Setter Property="FontFamily" Value="Tahoma" />
    </Style>
    <Style TargetType="{x:Type igDP:DataRecordCellArea}"  x:Key="DataRecordCellAreaStyleForGrid">
        <Setter Property="BorderBrush" Value="Black"/>
        <Setter Property="BorderThickness" Value="1,0,1,1"/>
        <Setter Property="Background" Value="WhiteSmoke"/>
        <Setter Property="CornerRadius" Value="0"/>
        <Setter Property="BackgroundActive" Value="{StaticResource SelectedRowColor}"/>
        <Setter Property="BackgroundAlternate" Value="Transparent" />
        <Setter Property="BorderAlternateBrush" Value="Transparent" />
        <Setter Property="BackgroundHover" Value="Transparent"/>
        <Setter Property="BackgroundSelected" Value="Transparent"/>
        <Setter Property="BorderActiveBrush" Value="Transparent"/>
        <Setter Property="BorderHoverBrush" Value="Transparent"/>
        <Setter Property="BorderSelectedBrush" Value="Transparent"/>
    </Style>

    <Style TargetType="{x:Type igDP:FieldChooser}" x:Key="FieldChooserStyle">

        <Style.Resources>
            <DataTemplate DataType="{x:Type igDP:FieldChooserEntry}">
                <DockPanel>
                    <editors:XamCheckEditor
							x:Name="checkBox"
							DockPanel.Dock="Left"
							IsThreeState="false"
							Value="{Binding Path=IsVisible, Mode=TwoWay}" />
                    <igDP:LabelPresenter
							x:Name="label"
							IsInFieldChooser="true"
							Field="{Binding Path=Field}"
							HorizontalContentAlignment="Left"
							VerticalContentAlignment="Center"
							IsSelectedInFieldChooser="{Binding Path=IsSelected}"
							Margin="5,0,0,0"
							DockPanel.Dock="Left">

                        <!--This is for toggling the visibility of a field by double clicking on it in
						the field chooser.-->
                        <igDP:LabelPresenter.InputBindings>
                            <MouseBinding MouseAction="LeftDoubleClick"
									Command="{x:Static igDP:FieldChooserCommands.ToggleVisibility}"
							/>
                        </igDP:LabelPresenter.InputBindings>
                    </igDP:LabelPresenter>
                </DockPanel>
                <DataTemplate.Triggers>
                    <!--When DisplayHiddenFieldsOnly is true, we display only the fields that are currently hidden in
						the data presenter. In this mode we shouldn't display checkboxes next to them because they all
						would be unchecked to begin with (since all fields being displayed are hidden) and checking a
						checkbox will make the field disappear from the field chooser since it would not longer be hidden
						in the data presenter.-->
                    <DataTrigger Binding="{Binding Path=DisplayHiddenFieldsOnly, RelativeSource={RelativeSource AncestorType={x:Type igDP:FieldChooser}}}" Value="true">
                        <Setter TargetName="checkBox" Property="Visibility" Value="Collapsed" />
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
            <!--Template that represents field groups displayed in the combo editor's drop-down list
			as well as its edit area.-->
            <DataTemplate DataType="{x:Type igDP:FieldChooserGroup}">
                <StackPanel x:Name="panel" ToolTip="{Binding FieldLayout.ToolTip}">
                    <TextBlock x:Name="fieldLayoutDescription" Text="{Binding Path=FieldLayout.Description}" />
                    <StackPanel x:Name="filterPanel" Orientation="Horizontal" Visibility="Collapsed">
                        <!--This rectangle is for indenting the filter description.-->
                        <Rectangle Width="20" />
                        <TextBlock Text="{Binding Path=FieldFilter.Description}" />
                    </StackPanel>
                </StackPanel>

                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding Path=HasFieldFilter}" Value="true">
                        <Setter TargetName="panel" Property="ToolTip" Value="{Binding FieldFilter.ToolTip}" />
                        <Setter TargetName="filterPanel" Property="Visibility" Value="Visible" />
                        <Setter TargetName="fieldLayoutDescription" Property="Visibility" Value="Collapsed" />
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </Style.Resources>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type igDP:FieldChooser}">
                    <Border BorderBrush="#202C38" BorderThickness="5" Background="Transparent">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <DockPanel Visibility="{TemplateBinding FieldGroupSelectorVisibilityResolved}" >
                                <editors:XamCheckEditor
									x:Name="toggleAllCheckBox"
									DockPanel.Dock="Left"
									IsThreeState="false"
									Value="{Binding Path=AllCurrentFieldsVisible, RelativeSource={x:Static RelativeSource.TemplatedParent}, Mode=TwoWay}"
									Visibility="{Binding Path=DisplayHiddenFieldsOnly, RelativeSource={x:Static RelativeSource.TemplatedParent}, Converter={StaticResource NotBoolToVisConverter}, Mode=OneWay}"
									Margin="4,0,0,0"
								/>
                                <!--Combo editor that has list of field layouts in its drop-down.-->
                                <!--<editors:XamComboEditor
										x:Name="fieldGroupSelector"
										DockPanel.Dock="Right"
										ItemsSource="{TemplateBinding FieldGroups}"
										ValueType="{x:Type igDP:FieldChooserGroup}"
										DisplayValueSource="Value"
										Value="{Binding Path=CurrentFieldGroup, RelativeSource={x:Static RelativeSource.TemplatedParent}, Mode=TwoWay}"
										HorizontalAlignment="Stretch"
								/>-->
                            </DockPanel>
                            <controls:CardPanel Grid.Row="1">

                                <!--List box that displays the fields-->
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>
                                    <Grid.Resources>
                                        <Style TargetType="{x:Type ScrollViewer}">
                                            <Setter Property="Background" Value="Transparent" />
                                            <Setter Property="Padding" Value="0"/>
                                            <Setter Property="BorderThickness" Value="1"/>
                                            <Setter Property="BorderBrush" Value="DarkGray"/>
                                        </Style>
                                    </Grid.Resources>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Top">
                                    </StackPanel>
                                    <ScrollViewer  VerticalScrollBarVisibility="Auto" Height="Auto" Grid.Row="2" BorderThickness="1" BorderBrush="DarkGray">
                                        <StackPanel Width="250">
                                            <TextBox TextChanged="TextBox_TextChanged" ScrollViewer.CanContentScroll="False"/>
                                    <ListBox
										x:Name="PART_FieldsListBox"
										ItemsSource="{TemplateBinding CurrentFields}"
										SelectionMode="Single" Width="250"
										SelectedItem="{Binding Path=SelectedField, RelativeSource={x:Static RelativeSource.TemplatedParent}, Mode=TwoWay}"
										HorizontalContentAlignment="Stretch" ScrollViewer.CanContentScroll="True">
                                        <!--Since the LabelPresenter elements are rendering the selected state, make the listbox item
									from rendering selected state itself. Also prevent it from drawing the dashed focus rect.-->
                                        <ListBox.ItemContainerStyle>
                                            <Style TargetType="{x:Type ListBoxItem}">
                                                        <!--<Setter Property="FocusVisualStyle" Value="{x:Null}" />-->
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                                                    <Border Background="Transparent" BorderBrush="DarkGray" BorderThickness="1">
                                                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </ListBox.ItemContainerStyle>

                                        <ListBox.InputBindings>
                                            <!--This is for toggling the visibility of the field in the data presenter (essentially the
												checkbox next to the field label).-->
                                            <KeyBinding
												Key="Space"
												Command="{x:Static igDP:FieldChooserCommands.ToggleVisibility}"
										/>
                                        </ListBox.InputBindings>
                                    </ListBox>
                                </StackPanel>
                                    </ScrollViewer>
                                </Grid>

                                <Border
										x:Name="highlightBorder"
										BorderThickness="2"
										BorderBrush="Transparent"
										HorizontalAlignment="Stretch"
										VerticalAlignment="Stretch"
								/>

                            </controls:CardPanel>

                        </Grid>

                    </Border>

                    <ControlTemplate.Triggers>

                        <Trigger Property="IsDraggingItem" Value="true">
                            <Setter TargetName="highlightBorder" Property="BorderBrush" Value="{DynamicResource {x:Static igDP:DataPresenterBrushKeys.FieldChooserDragBorderBrushKey}}" />
                        </Trigger>

                        <Trigger Property="IsDraggingItemFromDataPresenter" Value="true">
                            <Setter TargetName="highlightBorder" Property="BorderBrush" Value="{DynamicResource {x:Static igDP:DataPresenterBrushKeys.FieldChooserDragBorderBrushKey}}" />
                        </Trigger>

                        <Trigger Property="IsDragItemOver" Value="true">
                            <Setter TargetName="highlightBorder" Property="BorderBrush" Value="{DynamicResource {x:Static igDP:DataPresenterBrushKeys.FieldChooserDragBorderBrushKey}}" />
                        </Trigger>

                        <DataTrigger Binding="{Binding Path=CurrentFields.Count, RelativeSource={RelativeSource Self}}" Value="0" >
                            <Setter TargetName="toggleAllCheckBox" Property="IsEnabled" Value="false" />
                        </DataTrigger>
                    </ControlTemplate.Triggers>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="{x:Type igDP:GroupBySummariesPresenter}" x:Key="GroupBySummariesPresenterStyleForGrid">
        <Setter Property="Margin" Value="0,-4,0,0" />
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
    </Style>
    <Style x:Key="LabelContentStyle" TargetType="{x:Type ContentControl}">
        <Setter Property="Padding" Value="10,3,10,3"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ContentControl}">
                    <ContentPresenter
                        Margin="{TemplateBinding Padding}"
                        Content="{Binding Path=Content, RelativeSource={RelativeSource TemplatedParent}}"
                        ContentTemplate="{TemplateBinding ContentTemplate}"
                        ContentTemplateSelector="{TemplateBinding ContentTemplateSelector}"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="{x:Type igDP:GroupByRecordPresenter}" x:Key="GroupByRecordPresenterStyleForGrid">
        <Setter Property="FontSize" Value="12" />
        <Setter Property="BorderThickness" Value="1,0,1,0" />
        <Setter Property="BorderBrush" Value="Black" />
        <Setter Property="Foreground" Value="{DynamicResource {ComponentResourceKey {x:Type igDP:XamDataGrid}, LabelForeground}}"/>
        <Setter Property="Background" Value="#E7E8EA"/>
        <Setter Property="Margin" Value="0,0,0,0"/>
      
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type igDP:GroupByRecordPresenter}">
                    <ControlTemplate.Resources>
                        <Storyboard x:Key="sbDisplayNested">
                            <DoubleAnimationUsingKeyFrames
								BeginTime="00:00:00"
								Storyboard.TargetName="ncpVisual"
								Storyboard.TargetProperty="Opacity"
								FillBehavior="HoldEnd">
                                <DiscreteDoubleKeyFrame Value="0" KeyTime="00:00:00"/>
                                <DiscreteDoubleKeyFrame Value="0" KeyTime="00:00:00.25"/>
                                <SplineDoubleKeyFrame KeySpline="0.5,0.5,0.5,0.5" Value="1" KeyTime="00:00:0.75"/>
                            </DoubleAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ncpVisual" Storyboard.TargetProperty="(UIElement.Visibility)">
                                <DiscreteObjectKeyFrame Value="{x:Static Visibility.Visible}" KeyTime="00:00:00"/>
                                <DiscreteObjectKeyFrame Value="{x:Static Visibility.Collapsed}" KeyTime="00:00:0.75"/>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ncpMask" Storyboard.TargetProperty="(UIElement.Visibility)">
                                <DiscreteObjectKeyFrame Value="{x:Static Visibility.Visible}" KeyTime="00:00:00"/>
                                <DiscreteObjectKeyFrame Value="{x:Static Visibility.Collapsed}" KeyTime="00:00:0.75"/>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                        <Storyboard x:Key="sbHideNested">
                            <DoubleAnimationUsingKeyFrames
								BeginTime="00:00:00"
								Storyboard.TargetName="NestedContentPresenter"
								Storyboard.TargetProperty="Opacity"
								FillBehavior="HoldEnd">
                                <SplineDoubleKeyFrame KeySpline="0.5,0.5,0.5,0.5" Value="1" KeyTime="00:00:00.15"/>
                            </DoubleAnimationUsingKeyFrames>
                        </Storyboard>
                    </ControlTemplate.Resources>
                    <Grid Background="{TemplateBinding Background}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition x:Name="row0" Height="Auto"/>
                            <RowDefinition x:Name="row1" Height="Auto"/>
                            <RowDefinition x:Name="row2" Height="*"/>
                        </Grid.RowDefinitions>
                        <!-- Row for nested content -->
                        <!-- Expansion Checkbox -->

                        <controls:ExpansionIndicator x:Name="ExpansionIndicator"
                                                      RenderTransform="{TemplateBinding FixedNearElementTransform}"
                                                      Panel.ZIndex="1"
 							                          Grid.Row="1"
                                                      Visibility="{TemplateBinding ExpansionIndicatorVisibility}" 
                                                      Command="{x:Static igDP:DataPresenterCommands.ToggleRecordIsExpanded}"
                                                      CommandParameter="{TemplateBinding Record}"
                                                      ToggleMode="Manual" 
                                                      IsChecked="{Binding Path=IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"/>


                        <ContentPresenter
								x:Name="PART_HeaderContentSite"
								Grid.Row="0"
								Grid.Column="1"
								Content="{TemplateBinding HeaderContent}"
								HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
								VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>

                        <!-- Record content site -->

                        <Grid
							x:Name="PART_RecordContentSite"
                            RenderTransform="{TemplateBinding FixedNearElementTransform}"
							Margin="0"
							Grid.Row="1"
							Grid.Column="1"
							Visibility="Collapsed">
                            <!-- Background Bar -->
                            <Border
								HorizontalAlignment="Stretch"
								VerticalAlignment="Stretch"
								Width="Auto" 
								Height="Auto"
								RenderTransformOrigin="0.5,0.5"
								CornerRadius="2,2,2,2"
								SnapsToDevicePixels="True"
								Background="{DynamicResource {ComponentResourceKey {x:Type igDP:XamDataGrid}, LabelBackground}}">
                                <Grid Margin="0,0,0,0" Width="Auto" Height="Auto">
                                    <Rectangle
										Stroke="#44000000"
										StrokeThickness="0"
										RadiusX="1.55015910897703"
										RadiusY="1.55015910897703"
										Fill="Transparent"/>
                                    <Rectangle
										Margin="0"
										Stroke="#44FFFFFF"
										StrokeThickness="0"
										RadiusX="0.550159108977027"
										RadiusY="0.550159108977027"
										Fill="Transparent"/>
                                </Grid>
                            </Border>
                            <!-- End Added 8/1/2006 GH -->
                            <!-- End Background Bar -->
                            <Border
								x:Name="highlight"
								HorizontalAlignment="Stretch"
								VerticalAlignment="Stretch"
								Width="Auto"
								Height="Auto" BorderThickness="0,0,0,1" BorderBrush="Black"
								CornerRadius="2,2,2,2" 
								Background="#E7E8EA" >
                                <Grid Margin="0,0,0,0" Width="Auto" Height="Auto">
                                    <Rectangle
										Stroke="Black"
										StrokeThickness="0" 
										RadiusX="1.55015910897703"
										RadiusY="1.55015910897703"
										Fill="Transparent"/>
                                    <Rectangle
										Margin="0"
										Stroke="#44FFFFFF"
										StrokeThickness="0"
										RadiusX="0.550159108977027"
										RadiusY="0.550159108977027"
										Fill="Transparent"/>
                                </Grid>

                            </Border>

                            <!-- Label Text -->
                            <!-- SSP 4/3/08 - Summaries Functionality 
							Enclosed the existing ContentControl node into a Grid and added
							GroupBySummariesPresenter node.
							-->
                            <StackPanel Orientation="Vertical">
                                <ContentControl 
									Style="{StaticResource LabelContentStyle}"
									Content="{Binding Path=Description, RelativeSource={RelativeSource TemplatedParent}}"
									VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
									HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"/>
                                <!-- SSP 4/3/08 - Summaries Functionality -->
                                <!-- AS 1/27/09 NA 2009 Vol 1 - Set RenderTransform for fixed fields -->
                                <igDP:GroupBySummariesPresenter 
                                    RenderTransform="{TemplateBinding ScrollableElementTransform}"
									HorizontalAlignment="Left" 
									x:Name="GroupBySummariesPresenter" MouseDown="GroupBySummariesPresenter_OnMouseDown"
									Visibility="Collapsed"
									GroupByRecord="{TemplateBinding Record}"/>
                            </StackPanel>
                        </Grid>
                        <!-- Nested Content -->
                        <Grid
							x:Name="PART_NestedContentSite"
							Grid.Row="2"
							Grid.Column="1"
							Visibility="Collapsed">

                            <Border 
                                CornerRadius="0,0,3,3" 
                                BorderBrush="#44102975" 
                                BorderThickness="0"  
                                RenderTransform="{TemplateBinding FixedNearElementTransform}"
                                >

                                <ContentControl 
                                    RenderTransform="{TemplateBinding ScrollableElementTransform}"
                                    x:Name="NestedContentPresenter"
                                    Content="{Binding Path=NestedContent, RelativeSource={RelativeSource TemplatedParent}}" 
                                    Margin="0,0,0,0" />
                            </Border>


                        </Grid>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="ShouldDisplayGroupByRecordContent" Value="true">
                            <Setter TargetName="PART_RecordContentSite" Property="Visibility" Value="Visible"/>
                        </Trigger>
                        <Trigger Property="ShouldDisplayGroupByRecordContent" Value="false">
                            <Setter TargetName="ExpansionIndicator" Property="Visibility" Value="Hidden"/>
                        </Trigger>

                        <Trigger Property="ShouldDisplaySummaryCells" Value="true">
                            <Setter TargetName="GroupBySummariesPresenter" Property="Visibility" Value="Visible"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="Orientation" Value="Vertical"/>
                                <Condition Property="ShouldDisplayGroupByRecordContent" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="ExpansionIndicator" Property="Grid.Row" Value="2"/>
                        </MultiTrigger>


                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="Orientation" Value="Horizontal"/>
                                <Condition Property="ShouldDisplayGroupByRecordContent" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="PART_RecordContentSite" Property="Visibility" Value="Visible"/>
                        </MultiTrigger>

                        <Trigger Property="HasNestedContent" Value="true">
                            <Setter TargetName="PART_NestedContentSite" Property="Visibility" Value="Visible"/>
                        </Trigger>


                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding Path=FieldLayout.ChildRecordsDisplayOrderResolved}" Value="BeforeParent"/>
                                <Condition Binding="{Binding Path=Orientation, RelativeSource={RelativeSource Self}}" Value="Vertical"/>
                            </MultiDataTrigger.Conditions>
                            <Setter TargetName="PART_NestedContentSite" Property="Grid.Row" Value="0" />
                            <Setter TargetName="PART_HeaderContentSite" Property="Grid.Row" Value="1" />
                            <Setter TargetName="ExpansionIndicator" Property="Grid.Row" Value="2" />
                            <Setter TargetName="PART_RecordContentSite" Property="Grid.Row" Value="2" />
                            <Setter TargetName="row0" Property="Height" Value="*" />
                            <Setter TargetName="row2" Property="Height" Value="Auto" />
                        </MultiDataTrigger>


                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding Path=FieldLayout.ChildRecordsDisplayOrderResolved}" Value="BeforeParentHeadersAttached"/>
                                <Condition Binding="{Binding Path=Orientation, RelativeSource={RelativeSource Self}}" Value="Vertical"/>
                            </MultiDataTrigger.Conditions>
                            <Setter TargetName="PART_NestedContentSite" Property="Grid.Row" Value="0" />
                            <Setter TargetName="PART_HeaderContentSite" Property="Grid.Row" Value="1" />
                            <Setter TargetName="ExpansionIndicator" Property="Grid.Row" Value="2" />
                            <Setter TargetName="PART_RecordContentSite" Property="Grid.Row" Value="2" />
                            <Setter TargetName="row0" Property="Height" Value="*" />
                            <Setter TargetName="row2" Property="Height" Value="Auto" />
                        </MultiDataTrigger>

                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>