<Window
        x:Name="ExternalTransactionUi"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"       
        xmlns:ig="http://schemas.infragistics.com/xaml"
        xmlns:customChromeLibrary="clr-namespace:Prana.CustomChromeLibrary;assembly=Prana.CustomChromeLibrary"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:themes="http://infragistics.com/Themes"
        xmlns:shell="http://schemas.microsoft.com/winfx/2006/xaml/presentation/shell"
        x:Class="Prana.Allocation.Client.Controls.Allocation.Views.AddAndUpdateExternalTransactionID"
        Title="Add/Update ExternalTransactionID"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        WindowState="{Binding Path=BringToFront, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
        MinHeight="300" MinWidth="620" MaxHeight="300" MaxWidth="620" SizeToContent="Manual">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.Allocation.Client;component/NirvanaSkin.xaml"/>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamGrid.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Closing">
            <i:InvokeCommandAction Command="{Binding Path=FormCloseButton}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome
            ResizeBorderThickness="6"
            CaptionHeight="22"
            CornerRadius="5"
            GlassFrameThickness="0"/>
    </shell:WindowChrome.WindowChrome>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--provide the background for the entire form.  In practice, this appears as the window's resize border, because the title and window content obscure the rest-->
        <Border CornerRadius="2" Grid.RowSpan="2" BorderThickness="5" BorderBrush="#FF212C39" Background="#FFD1D2D4"/>

        <!--title bar-->
        <Border CornerRadius="2" BorderThickness="1" BorderBrush="#FF212C39" Background="#FF212C39">
            <!--Window Icon and Title-->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left">
                <TextBlock Height="22" Margin="5,0,0,0" Foreground="#FFD1D2D4" VerticalAlignment="Center">
                    <TextBlock.Style>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="FontSize" Value="15"/>
                            <Setter Property="Text" Value="Nirvāna"/>
                            <Setter Property="FontFamily" Value="Mulish"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding BringToFront}" Value="Minimized">
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Text" Value="External Transaction"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StackPanel>

        </Border>

        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
            <TextBlock Text="External Transaction" Height="22" FontSize="15" Foreground="#FF8ABB54" VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock.Style>
                    <Style TargetType="{x:Type TextBlock}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding BringToFront}" Value="Minimized">
                                <Setter Property="Text" Value=""/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            <customChromeLibrary:CaptionButtons  VerticalAlignment="Center"/>
        </StackPanel>
        <!--min/max/close buttons-->

        <Grid Grid.Row="1" Margin="7">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <ig:XamGrid Grid.Row="0" ItemsSource="{Binding Path=ExternalTransactionTable, Mode=TwoWay}" Grid.ColumnSpan="2"  >
                <ig:XamGrid.EditingSettings>
                    <ig:EditingSettings  AllowEditing="Cell" IsMouseActionEditingEnabled="SingleClick" IsOnCellActiveEditingEnabled="True"/>
                </ig:XamGrid.EditingSettings>

                <ig:XamGrid.Columns>
                    <ig:TextColumn Key="TaxlotID" HeaderText="Taxlot ID" IsReadOnly="True"/>
                    <ig:TextColumn Key="Symbol" HeaderText="Symbol" IsReadOnly="True"/>
                    <ig:TextColumn Key="Side" HeaderText="Side" IsReadOnly="True"/>
                    <ig:TextColumn Key="Quantity" HeaderText="Quantity" IsReadOnly="True"/>
                    <ig:TextColumn Key="StrategyID" HeaderText="Strategy ID" IsReadOnly="True"/>
                    <ig:TextColumn Key="Strategy" HeaderText="Strategy" IsReadOnly="True"/>
                    <ig:TextColumn Key="ExternalTransactionID" HeaderText="External TransactionID"/>
                </ig:XamGrid.Columns>
            </ig:XamGrid>

            <Button x:Name="btnOK" Content="OK" Grid.Row="1" Grid.Column="0" Width="100" Margin="5" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{DynamicResource ButtonForeground}" Template="{DynamicResource GreenButtonSkinTemplate}" Height="26">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click">
                        <i:InvokeCommandAction Command="{Binding OkButtonExternalTransactionUi}" CommandParameter="{Binding ElementName=ExternalTransactionUi}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </Button>
            <Button x:Name="btnCancel" Content="Cancel" Grid.Row="1" Width="100" Margin="5" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="1" Foreground="{DynamicResource ButtonForeground}" Template="{DynamicResource RedButtonSkinTemplate}" Height="26">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click">
                        <i:InvokeCommandAction Command="{Binding CloseExternalTransactionUi}" CommandParameter="{Binding ElementName=ExternalTransactionUi}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </Button>
        </Grid>

    </Grid>
</Window>
