<UserControl xmlns:Views="clr-namespace:Prana.Allocation.Client.Controls.Common.Views"  x:Class="Prana.Allocation.Client.Controls.Preferences.Views.MasterFundPreferencesControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Prana.Allocation.Client.Controls.Preferences.Views" 
             xmlns:viewModels="clr-namespace:Prana.Allocation.Client.Controls.Preferences.ViewModels"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:themes="http://infragistics.com/Themes"
             xmlns:igWPF="http://schemas.infragistics.com/xaml"
             mc:Ignorable="d" 
             d:DesignHeight="300" MinHeight="300" d:DesignWidth="300"
             DataContext="{DynamicResource MasterFundPreferencesControlViewModel}" Background="{DynamicResource UserControlBackGround}">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.Allocation.Client;component/NirvanaSkin.xaml"/>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamComboEditor.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamDockManager.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamEditors.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamGrid.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMenu.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMultiColumnCombo.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
            </ResourceDictionary.MergedDictionaries>
            <viewModels:MasterFundPreferencesControlViewModel x:Key="MasterFundPreferencesControlViewModel"/>
            <Style x:Key="ComboBoxStyle" TargetType="{x:Type ComboBox}">
                <Setter Property="IsEnabled" Value="True"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=ItemsSource.Count, ElementName=cmbboxMFList}" Value="0">
                        <Setter Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="4*"/>
        </Grid.ColumnDefinitions>
        <local:CalculatedPreferencesListControl Grid.Column="0" DataContext="{Binding Path=CalculatedPreferencesListControlViewModel}" Background="{DynamicResource UserControlBackGround}"/>
        <GridSplitter Grid.Column="1" ResizeDirection="Auto" Height="Auto" Width="4" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Visibility="Visible" Margin="0"/>
        <Grid Grid.Column="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Views:DefaultRuleControl Grid.Row="0" DataContext="{Binding Path=MasterFundDefaultRuleViewModel}" Margin="0"/>
                <GroupBox Name="MasterFunds" Grid.Row="1" Header="Master Fund Distribution" Margin="5" BorderBrush="{DynamicResource GroupBoxBorder}">
                    <local:MasterFundRatioControl  DataContext="{Binding Path=MasterFundRatioControlViewModel}" Margin="5"/>
                </GroupBox>
            </Grid>
            <GridSplitter Grid.Column="1" ResizeDirection="Auto" Height="Auto" Width="4" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Visibility="Visible" Margin="0"/>
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" MinWidth="100"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <ComboBox Name="cmbboxMFList" ToolTip="{Binding SelectedItem.Value, RelativeSource={RelativeSource Self}}" IsEditable="True" IsReadOnly="True" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="5,5,5,5" Grid.Column="0" SelectedItem="{Binding Path=SelectedMFforPreviewCalculatedPref, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ItemsSource="{Binding Path=SelectedMasterFundsList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="Value" Width="100" Template="{DynamicResource ComboBoxEditableTemplate}" Text="-Select-" Style="{StaticResource ComboBoxStyle}">
                        <ComboBox.ItemContainerStyle>
                            <Style>
                                <Setter Property="Control.ToolTip" Value="{Binding Value}" />
                            </Style>
                        </ComboBox.ItemContainerStyle>
                    </ComboBox>
                    <StatusBarItem Grid.Column="1" Margin="5,5,5,5" Background="LightGray">
                        <TextBlock Text="{Binding Path=MFCalulatedPrefLabel}" FontWeight="Bold"></TextBlock>
                    </StatusBarItem>
                </Grid>
                <GroupBox Name="AccountStrategy" Grid.Row="1" Header="Account Strategy Distribution" Margin="5" BorderBrush="{DynamicResource GroupBoxBorder}">
                    <local:PreferenceAccountStrategyControl DataContext="{Binding Path=PreferenceAccountStrategyControlViewModel}" Margin="5"/>
                </GroupBox>
                <GroupBox Name="gboxDefaultRule" Grid.Row="2" Header="Default Rule" Margin="5" BorderBrush="{DynamicResource GroupBoxBorder}">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                        <local:CalculatedPreferenceDefaultRuleControl DataContext="{Binding Path=CalculatedPreferenceDefaultRuleControlViewModel}"/>
                    </ScrollViewer>
                </GroupBox>
                <GroupBox Name="gboxGeneralRule" Header="General Rule"  Grid.Row="3"  Margin="5" BorderBrush="{DynamicResource GroupBoxBorder}">
                    <local:CalculatedPreferenceGeneralRuleControl Margin="5" DataContext="{Binding Path=CalculatedPreferenceGeneralRuleControlViewModel}"/>
                </GroupBox>
            </Grid>
        </Grid>
    </Grid>
</UserControl>
