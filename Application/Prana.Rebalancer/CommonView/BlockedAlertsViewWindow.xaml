<Window
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:md="https://github.com/fantasticfiasco/mvvm-dialogs"
	xmlns:themes="http://infragistics.com/Themes"
	xmlns:viewModel="clr-namespace:Prana.Rebalancer.CommonViewModel"
	xmlns:converter="clr-namespace:Prana.Rebalancer.Converters"
    xmlns:shell="http://schemas.microsoft.com/winfx/2006/xaml/presentation/shell"
	xmlns:i="http://schemas.microsoft.com/xaml/behaviors"	
	xmlns:customChromeLibrary="clr-namespace:Prana.CustomChromeLibrary;assembly=Prana.CustomChromeLibrary"
    xmlns:dataPresenter="http://infragistics.com/DataPresenter"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:editors="http://infragistics.com/Editors"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:Enums="clr-namespace:Prana.BusinessObjects.AppConstants;assembly=Prana.BusinessObjects"
    	xmlns:behavior="clr-namespace:Prana.Rebalancer.CommonBehavior"
    xmlns:classes="clr-namespace:Prana.Rebalancer.Classes"
    mc:Ignorable="d"
    x:Class="Prana.Rebalancer.BlockedAlertsViewWindow"
	x:Name="Window"
	Title="Blocked Alerts"
     md:DialogServiceViews.IsRegistered="True"
     DataContext="{DynamicResource BlockedAlertsViewModel}"
	Width="518" Height="386" >
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.Rebalancer;component/PercentTradingTool/Themes/NirvanaSkin.xaml"/>
                <ResourceDictionary Source="/Prana.Rebalancer;component/PercentTradingTool/Themes/NirvanaErrorTemplate.xaml"/>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Rebalancer;component/PercentTradingTool/Themes/IG/IG.xamComboEditor.xaml"/>
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Rebalancer;component/PercentTradingTool/Themes/IG/DataPresenterIGTheme_Express.xaml"/>
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
            </ResourceDictionary.MergedDictionaries>
            <viewModel:BlockedAlertsViewModel x:Key="BlockedAlertsViewModel" />
            <converter:BooleanToVisbilityConverterLocal x:Key="BooleanToVisbilityConverterLocal" />
        </ResourceDictionary>
    </Window.Resources>
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome
            ResizeBorderThickness="6"
            CaptionHeight="22"
            CornerRadius="5"
            GlassFrameThickness="0"/>
    </shell:WindowChrome.WindowChrome>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding Path=BlockedAlertsViewerLoaded}" PassEventArgsToCommand="True" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--provide the background for the entire form.  In practice, this appears as the window's resize border, because the title and window content obscure the rest-->
        <Border CornerRadius="2" Grid.RowSpan="2" BorderThickness="5" BorderBrush="#FF212C39" Background="#FFD1D2D4"/>

        <!--title bar-->
        <Border CornerRadius="2" BorderThickness="1" BorderBrush="#FF212C39" Background="#FF212C39">
            <!--Window Icon and Title-->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Left">
                <TextBlock Name="tbNirvana" Text="Nirvāna" FontFamily="Mulish" Height="22" Margin="5,0,0,0" FontSize="15" Foreground="#FFD1D2D4" VerticalAlignment="Center"/>
            </StackPanel>

        </Border>

        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
            <TextBlock Text="{Binding Path=AlertComplianceType}" Height="22" FontSize="15" Foreground="#FF8ABB54" VerticalAlignment="Center" HorizontalAlignment="Center"/>
            <customChromeLibrary:CaptionButtons  VerticalAlignment="Center"/>
        </StackPanel>
        <!--min/max/close buttons-->

        <!--Content-->
        <Grid x:Name="LayoutRoot" Grid.Row="3" Margin="7">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <TextBlock Margin="5,10,5,10" TextWrapping="WrapWithOverflow" Grid.Row="0" Text="{Binding Path=RuleMessageText}"/>
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" CanContentScroll="True">
                <StackPanel >
                    <i:Interaction.Behaviors>
                        <behavior:DynamicStackPanelBehavior Alerts="{Binding Path=Alerts}" CanBindAlerts="{Binding Path=CanBindAlerts}"/>
                    </i:Interaction.Behaviors>
                </StackPanel>
            </ScrollViewer>
            <Grid Grid.Row="3">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="{Binding Path=ConfirmationText}" Visibility="{Binding Path=IsConfirmationVisible, Converter={StaticResource BooleanToVisbilityConverterLocal}}" Template="{DynamicResource GreenButtonSkinTemplate}" Margin="10" Foreground="White" Width="80" Height="27">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <i:InvokeCommandAction Command="{Binding Path=ConfirmationClicked}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </Button>
                    <Button Content="{Binding Path=RejectionText}" Visibility="{Binding Path=IsRejectionVisible, Converter={StaticResource BooleanToVisbilityConverterLocal}}" Template="{DynamicResource RedButtonSkinTemplate}" Margin="10" Foreground="White" Width="80" Height="27">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <i:InvokeCommandAction Command="{Binding Path=RejectionClicked}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </Button>
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</Window>