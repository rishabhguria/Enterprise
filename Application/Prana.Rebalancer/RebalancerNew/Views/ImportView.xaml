<Window x:Class="Prana.Rebalancer.RebalancerNew.Views.ImportView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
        WindowStyle="None"
        xmlns:themes="http://infragistics.com/Themes"
             xmlns:customChromeLibrary="clr-namespace:Prana.CustomChromeLibrary;assembly=Prana.CustomChromeLibrary"
        xmlns:shell="http://schemas.microsoft.com/winfx/2006/xaml/presentation/shell"
                     xmlns:ig="http://infragistics.com/DataPresenter"
        xmlns:igWPF="http://schemas.infragistics.com/xaml/wpf"
        xmlns:converters ="clr-namespace:Prana.Rebalancer.Converters"
        MaxHeight="430"
        MinHeight="430"
        MaxWidth="800"
        MinWidth="800"
        x:Name="ImportWindow">
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome
            ResizeBorderThickness="6"
            CaptionHeight="22"
            CornerRadius="5"
            GlassFrameThickness="0"/>
    </shell:WindowChrome.WindowChrome>
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.Rebalancer;component/RebalancerNew/Themes/NirvanaSkin.xaml" />
                <ResourceDictionary Source="/Prana.Rebalancer;component/RebalancerNew/Themes/RebalancerTheme.xaml" />
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Rebalancer;component/RebalancerNew/Themes/IG/IG.xamComboEditor.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Rebalancer;component/RebalancerNew/Themes/IG/DataPresenterIGTheme_Express.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
            </ResourceDictionary.MergedDictionaries>
            <converters:BooleanToVisibileCollapseConverter x:Key="BooleanToVisibilityConverter"/>
            <Style x:Key="ButtonStyle" TargetType="{x:Type Button}">
                <Setter Property="Template" Value="{DynamicResource ButtonControlTemplate}"/>
                <Setter Property="Width" Value="75"/>
                <Setter Property="Height" Value="20"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="Margin" Value="20,10,0,0"/>
            </Style>
            <Style TargetType="{x:Type igWPF:CellValuePresenter}" x:Key="ValidityImage">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type igWPF:CellValuePresenter}">
                            <Image Width="20" Height="20" Margin="0,0,0,2">
                                <Image.Style>
                                    <Style>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding  RelativeSource={RelativeSource TemplatedParent}, Path=Value}" Value="False">
                                                <Setter Property="Image.Source" Value="..\..\RebalancerNew\Resources\Images\InValidIcon.png"/>
                                                <Setter Property="Image.ToolTip" Value="Invalid"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Value}" Value="True">
                                                <Setter Property="Image.Source" Value="..\..\RebalancerNew\Resources\Images\ValidIcon.png"/>
                                                <Setter Property="Image.ToolTip" Value="Valid"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Image.Style>
                            </Image>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <DataTemplate x:Key="StringFieldDisplayTemplate">
                <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value,Mode=OneWay, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}"
                               HorizontalAlignment="Left" Padding="0,0,5,0" Style="{StaticResource GridTextBlockStyle}"/>
            </DataTemplate>
            <DataTemplate x:Key="EditableFieldDisplayTemplate">
                <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value,Mode=OneWay, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,StringFormat={StaticResource StringFormatForDecimal}}"
                           HorizontalAlignment="Right" Padding="0,0,5,0" Style="{StaticResource GridTextBlockStyle}"/>
            </DataTemplate>
        </ResourceDictionary>
    </Window.Resources>
    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Border CornerRadius="2" BorderThickness="5" BorderBrush="#FF212C39" Background="#FFD1D2D4" Grid.RowSpan="2"/>
        <Border CornerRadius="2" Grid.Row="0" BorderThickness="1" BorderBrush="#FF212C39" Background="#FF212C39">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Top">
                <TextBlock x:Name="tbNirvana" Text="Nirvāna" FontFamily="Mulish" Height="22" Margin="5,0,0,0" FontSize="15" Foreground="#FFD1D2D4" VerticalAlignment="Center" />
            </StackPanel>
        </Border>
        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
            <TextBlock x:Name="ImportTextBlock" Height="22" FontSize="14" Foreground="#FF8ABB54" VerticalAlignment="Center" HorizontalAlignment="Center" />
            <customChromeLibrary:CaptionButtons  VerticalAlignment="Center" />
        </StackPanel>
        <DockPanel Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" LastChildFill="True">
            <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Visibility="{Binding IsCustomGroupGridVisible, Mode=OneWay,Converter={StaticResource BooleanToVisibilityConverter}}" >
                <igWPF:XamDataGrid x:Name="Grid" Background="{StaticResource XamDataGridBackground}" Margin="20,10,0,0" Grid.Row="4" HorizontalAlignment="Left" DataSource="{Binding CustomGroupGrid,Mode=TwoWay}"  VerticalAlignment="Top" AutoFit="True" MaxHeight="350" GroupByAreaLocation="None">
                    <igWPF:XamDataGrid.Resources>
                        <Style TargetType="{x:Type igWPF:CellValuePresenter}" BasedOn="{StaticResource CellValuePresenterStyleForGrid}"/>
                        <Style TargetType="{x:Type igWPF:DataRecordCellArea}" x:Key="DataRecordCellAreaStyle" BasedOn="{StaticResource DataRecordCellAreaStyleForGrid}"/>
                    </igWPF:XamDataGrid.Resources>
                    <igWPF:XamDataGrid.ViewSettings>
                        <igWPF:GridViewSettings/>
                    </igWPF:XamDataGrid.ViewSettings>
                    <igWPF:XamDataGrid.FieldSettings>
                        <igWPF:FieldSettings x:Name="FieldSettings" AllowEdit="False"  AllowRecordFiltering="True" AutoSizeOptions="Label, DataCells"/>
                    </igWPF:XamDataGrid.FieldSettings>
                    <igWPF:XamDataGrid.FieldLayoutSettings>
                        <igWPF:FieldLayoutSettings AutoFitMode="Default" AutoGenerateFields="False" RecordSelectorLocation="None" HighlightAlternateRecords="True"  AllowClipboardOperations="Copy"  FilterUIType="LabelIcons">
                            <igWPF:FieldLayoutSettings.DataRecordCellAreaStyle>
                                <Style TargetType="{x:Type igWPF:DataRecordCellArea}" BasedOn="{StaticResource DataRecordCellAreaStyle}"/>
                            </igWPF:FieldLayoutSettings.DataRecordCellAreaStyle>
                        </igWPF:FieldLayoutSettings>
                    </igWPF:XamDataGrid.FieldLayoutSettings>
                    <igWPF:XamDataGrid.FieldLayouts>
                        <igWPF:FieldLayout>
                            <igWPF:Field Name="IsValid"  Label="Symbol Validity" AllowResize="False" Width="25" AllowEdit="False">
                                <igWPF:Field.Settings>
                                    <igWPF:FieldSettings CellValuePresenterStyle="{StaticResource ValidityImage}" />
                                </igWPF:Field.Settings>
                            </igWPF:Field>
                            <igWPF:TemplateField Label="CustomGroup Name"  Name="CustomGroupName" AllowEdit="False" Width="170" DisplayTemplate="{StaticResource StringFieldDisplayTemplate}"/>
                            <igWPF:TemplateField AllowEdit="False" Label="Account Name" Name="AccountName" Width="140" DisplayTemplate="{StaticResource StringFieldDisplayTemplate}"/>
                            <igWPF:TemplateField AllowEdit="False" Label="Comments" Name="Comment" Width="450" DisplayTemplate="{StaticResource StringFieldDisplayTemplate}"/>
                        </igWPF:FieldLayout>
                    </igWPF:XamDataGrid.FieldLayouts>
                </igWPF:XamDataGrid>
                <Button x:Name="btnSave" Content="Save" HorizontalAlignment="Center" VerticalAlignment="Center" Style="{StaticResource ButtonStyle}" Click="Button_Click"/>
            </StackPanel>
            <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Visibility="{Binding IsCashFlowGridVisible, Mode=OneWay,Converter={StaticResource BooleanToVisibilityConverter}}">
                <igWPF:XamDataGrid x:Name="Grid1" Background="{StaticResource XamDataGridBackground}" Margin="20,10,0,0" Grid.Row="4" HorizontalAlignment="Left" DataSource="{Binding CashFlowGrid,Mode=TwoWay}"  VerticalAlignment="Top" AutoFit="True" MaxHeight="350" GroupByAreaLocation="None">
                    <igWPF:XamDataGrid.Resources>
                        <Style TargetType="{x:Type igWPF:CellValuePresenter}" BasedOn="{StaticResource CellValuePresenterStyleForGrid}"/>
                        <Style TargetType="{x:Type igWPF:DataRecordCellArea}" x:Key="DataRecordCellAreaStyle" BasedOn="{StaticResource DataRecordCellAreaStyleForGrid}"/>
                    </igWPF:XamDataGrid.Resources>
                    <igWPF:XamDataGrid.ViewSettings>
                        <igWPF:GridViewSettings/>
                    </igWPF:XamDataGrid.ViewSettings>
                    <igWPF:XamDataGrid.FieldSettings>
                        <igWPF:FieldSettings x:Name="FieldSettings1" AllowEdit="False"  AllowRecordFiltering="True" AutoSizeOptions="Label, DataCells"/>
                    </igWPF:XamDataGrid.FieldSettings>
                    <igWPF:XamDataGrid.FieldLayoutSettings>
                        <igWPF:FieldLayoutSettings AutoFitMode="Default" AutoGenerateFields="False" RecordSelectorLocation="None" HighlightAlternateRecords="True"  AllowClipboardOperations="Copy"  FilterUIType="LabelIcons">
                            <igWPF:FieldLayoutSettings.DataRecordCellAreaStyle>
                                <Style TargetType="{x:Type igWPF:DataRecordCellArea}" BasedOn="{StaticResource DataRecordCellAreaStyle}"/>
                            </igWPF:FieldLayoutSettings.DataRecordCellAreaStyle>
                        </igWPF:FieldLayoutSettings>
                    </igWPF:XamDataGrid.FieldLayoutSettings>
                    <igWPF:XamDataGrid.FieldLayouts>
                        <igWPF:FieldLayout>
                            <igWPF:Field Name="IsValid"  Label="Symbol Validity" AllowResize="False" Width="25" AllowEdit="False">
                                <igWPF:Field.Settings>
                                    <igWPF:FieldSettings CellValuePresenterStyle="{StaticResource ValidityImage}" />
                                </igWPF:Field.Settings>
                            </igWPF:Field>
                            <igWPF:TemplateField AllowEdit="False" Label="Account Name" Name="AccountName" Width="140" DisplayTemplate="{StaticResource StringFieldDisplayTemplate}"/>
                            <igWPF:TemplateField Label="Cash Flow"  Name="Cash" AllowEdit="False" Width="170" DisplayTemplate="{StaticResource EditableFieldDisplayTemplate}"/>
                            <igWPF:TemplateField AllowEdit="False" Label="Comments" Name="Comment" Width="450" DisplayTemplate="{StaticResource StringFieldDisplayTemplate}"/>
                        </igWPF:FieldLayout>
                    </igWPF:XamDataGrid.FieldLayouts>
                </igWPF:XamDataGrid>
                <Button x:Name="btnOK" Content="OK" HorizontalAlignment="Center" VerticalAlignment="Center" Style="{StaticResource ButtonStyle}" Click="Button_Click"/>
            </StackPanel>
        </DockPanel>
    </Grid>
</Window>
