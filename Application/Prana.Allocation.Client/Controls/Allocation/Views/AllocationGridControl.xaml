<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:igWPF="http://schemas.infragistics.com/xaml/wpf" 
             xmlns:Custom="http://infragistics.com/DataPresenter"
             x:Class="Prana.Allocation.Client.Controls.Allocation.Views.AllocationGridControl" 
             xmlns:viewModels="clr-namespace:Prana.Allocation.Client.Controls.Allocation.ViewModels"
             xmlns:Constants="clr-namespace:Prana.Allocation.Client.Constants"
             xmlns:behaviors="clr-namespace:Prana.Allocation.Client.Controls.Allocation.Behaviours"
             xmlns:commonBehaviours="clr-namespace:Prana.Allocation.Client.Behaviours" 
             xmlns:Converters="clr-namespace:Prana.Allocation.Client.ValueConvertor"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:igEditors="http://infragistics.com/Editors"
             xmlns:igWindows="http://infragistics.com/Windows"
             xmlns:igDP="http://infragistics.com/DataPresenter"
             xmlns:md="https://github.com/fantasticfiasco/mvvm-dialogs"
             xmlns:bindingProxy="clr-namespace:Prana.Allocation.Client"
             xmlns:ig="http://schemas.infragistics.com/xaml"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             md:DialogServiceViews.IsRegistered="True"
             mc:Ignorable="d"
             xmlns:igExcelExporter="http://infragistics.com/ExcelExporter"
             xmlns:themes="http://infragistics.com/Themes"
             DataContext="{DynamicResource AllocationGridControlViewModel}" Background="{DynamicResource UserControlBackGround}">
    <UserControl.Resources>
        <ResourceDictionary>
            <Converters:IntegerToStringConverter x:Key="IntegerToStringConverter"/>
            <Converters:EnumToStringConverter x:Key="EnumToStringConverter"/>
            <Converters:UnboundColumnsConverter x:Key="UnboundColumnsConverter"/>
            <igWindows:NotBoolToVisibilityConverter x:Key="NotBoolToVisConverter" />
            <igExcelExporter:DataPresenterExcelExporter x:Key="Exporter"/>
            <igExcelExporter:DataPresenterExcelExporter x:Key="AllocatedGridExporter"/>
            <igExcelExporter:DataPresenterExcelExporter x:Key="UnallocatedGridExporter"/>
            <Converters:MultipleParameterConverter x:Key="MultipleParameterConverter"/>
            <Converters:EnumToEnumerationValueConverter x:Key="EnumToEnumerationValueConverter"/>
            <Converters:StringToKeyValuePairValueConverter x:Key="StringToKeyValuePairValueConverter"/>
            <Converters:IntToKeyValuePairValueConverter x:Key="IntToKeyValuePairValueConverter"/>
            <Converters:PrecisionFormatDisplayConverter x:Key="PrecisionFormatDisplayConverter"/>
            <Converters:DictionaryValueToKeyConverter x:Key="DictionaryValueToKeyConverter"/>
            <viewModels:AllocationGridControlViewModel x:Key="AllocationGridControlViewModel"/>
            <Style TargetType="{x:Type igWPF:FixedFieldSplitter}">
                <Setter Property="Opacity" Value="0.0"/>
            </Style>
            <Style TargetType="Button" x:Key="{x:Static igDP:RecordExportStatusControl.CancelExportButtonStyleKey}">
                <Setter Property="Height" Value="14" />
                <Setter Property="Width" Value="14" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <TextBlock Text="X" Visibility="Hidden" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style TargetType="{x:Type Custom:RecordSelector}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Custom:RecordSelector}">
                            <CheckBox HorizontalAlignment="Center" VerticalAlignment="Center" IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Record.Cells[IsSelected].Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Click">
                                        <i:InvokeCommandAction Command="{Binding Path=DataContext.AllocationGroupClicked, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" CommandParameter="{Binding Path=ActiveDataItem, RelativeSource={RelativeSource AncestorType={x:Type Custom:XamDataGrid}}}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </CheckBox>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style TargetType="{x:Type Custom:LabelPresenter}">
                <Setter Property="ContentTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center" ToolTip="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}" />
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style TargetType="{x:Type igDP:CellValuePresenter}">
                <Setter Property="HorizontalContentAlignment" Value="Right"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type igDP:DataRecordPresenter}}, Path=IsActive}" Value="True">
                        <Setter Property="Background">
                            <Setter.Value>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#7DC0FF" Offset="0.0"/>
                                    <GradientStop Color="#C6E3FE" Offset="0.5"/>
                                    <GradientStop Color="#E6F0FA" Offset="1.0"/>
                                </LinearGradientBrush>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Foreground" Value="Black"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style TargetType="{x:Type igWPF:CellValuePresenter}" x:Key="CalculatedColumnStyle">
                <Style.Setters>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type igWPF:CellValuePresenter}">
                                <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Padding="{TemplateBinding Padding}">
                                    <TextBlock TextAlignment="Right" VerticalAlignment="Center" Padding="0,0,2,0">
                                        <TextBlock.Text>
                                            <MultiBinding Converter="{StaticResource UnboundColumnsConverter}">
                                                <Binding Path="Field.Name" RelativeSource="{RelativeSource TemplatedParent}"/>
                                                <Binding Path="DataContext.AssetsWithCommissionInNetAmountList" RelativeSource="{RelativeSource AncestorType={x:Type igWPF:XamDataGrid}}"/>
                                                <Binding Path="DataContext.PrecisionFormat" RelativeSource="{RelativeSource AncestorType={x:Type igWPF:XamDataGrid}}"/>
                                                <Binding Path="DataItem.AvgPrice"/>
                                                <Binding Path="DataItem.FXRate"/>
                                                <Binding Path="DataItem.TotalCommissionandFees"/>
                                                <Binding Path="DataItem.CumQty"/>
                                                <Binding Path="DataItem.ContractMultiplier"/>
                                                <Binding Path="DataItem.FXConversionMethodOperator"/>
                                                <Binding Path="DataItem.OrderSideTagValue"/>
                                                <Binding Path="DataItem.AssetID"/>
                                                <Binding Path="DataItem.AccruedInterest"/>
                                                <Binding Path="DataItem.AUECLocalDate"/>                                          
                                                <Binding Path="DataItem.CurrencyID"/>
                                                <Binding Path="DataItem.VsCurrencyID"/>
                                                <Binding Path="DataItem.LeadCurrencyID"/>
                                            </MultiBinding>
                                        </TextBlock.Text>
                                    </TextBlock>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style.Setters>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type igDP:DataRecordPresenter}}, Path=IsActive}" Value="True">
                        <Setter Property="Background">
                            <Setter.Value>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#7DC0FF" Offset="0.0"/>
                                    <GradientStop Color="#C6E3FE" Offset="0.5"/>
                                    <GradientStop Color="#E6F0FA" Offset="1.0"/>
                                </LinearGradientBrush>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Foreground" Value="Black"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style TargetType="{x:Type igWPF:CellValuePresenter}" x:Key="CalculatedTaxlotColumnStyle">
                <Style.Setters>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type igWPF:CellValuePresenter}">
                                <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Padding="{TemplateBinding Padding}">
                                    <TextBlock TextAlignment="Right" VerticalAlignment="Center" Padding="0,0,2,0">
                                        <TextBlock.Text>
                                            <MultiBinding Converter="{StaticResource UnboundColumnsConverter}">
                                                <Binding Path="Field.Name" RelativeSource="{RelativeSource TemplatedParent}"/>
                                                <Binding Path="DataContext.AssetsWithCommissionInNetAmountList" RelativeSource="{RelativeSource AncestorType={x:Type igWPF:XamDataGrid}}"/>
                                                <Binding Path="DataContext.PrecisionFormat" RelativeSource="{RelativeSource AncestorType={x:Type igWPF:XamDataGrid}}"/>
                                                <Binding Path="DataItem.AvgPrice"/>
                                                <Binding Path="DataItem.FXRate"/>
                                                <Binding Path="DataItem.TotalCommissionandFees"/>
                                                <Binding Path="DataItem.ExecutedQty"/>
                                                <Binding Path="DataItem.ContractMultiplier"/>
                                                <Binding Path="DataItem.FXConversionMethodOperator"/>
                                                <Binding Path="DataItem.OrderSideTagValue"/>
                                                <Binding Path="DataItem.AssetID"/>
                                                <Binding Path="DataItem.AccruedInterest"/>
                                                <Binding Path="DataItem.AUECLocalDate"/>
                                                <Binding Path="DataItem.CurrencyID"/>
                                                <Binding Path="DataItem.VsCurrencyID"/>
                                                <Binding Path="DataItem.LeadCurrencyID"/>
                                            </MultiBinding>
                                        </TextBlock.Text>
                                    </TextBlock>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style.Setters>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type igDP:DataRecordPresenter}}, Path=IsActive}" Value="True">
                        <Setter Property="Background">
                            <Setter.Value>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#7DC0FF" Offset="0.0"/>
                                    <GradientStop Color="#C6E3FE" Offset="0.5"/>
                                    <GradientStop Color="#E6F0FA" Offset="1.0"/>
                                </LinearGradientBrush>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Foreground" Value="Black"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.Allocation.Client;component/NirvanaSkin.xaml"/>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamComboEditor.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamDockManager.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamEditors.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamGrid.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMenu.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMultiColumnCombo.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid Grid.Row="0">
            <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Label Content="Unallocated Trades" Grid.Row="0"  HorizontalAlignment="Left"/>
            <Custom:XamDataGrid Grid.Row="1" Name="GridUnallocated" ScrollingMode="Immediate" HorizontalAlignment="Stretch" DataSource="{Binding Path=UnAllocatedGroupsCollection, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" GroupByAreaLocation="None" SelectedDataItemsScope="RecordsOnly" RecordSelectorExtent="30" ActiveDataItem="{Binding Path=ActiveUnallocatedDataItem, Mode=TwoWay}" Background="#FFE7E8E9" CellContainerGenerationMode="Recycle" RecordContainerGenerationMode="Recycle">
            <Custom:XamDataGrid.Resources>
                    <Style TargetType="{x:Type igDP:FieldChooser}" >
                    <Style.Resources>
                        <DataTemplate DataType="{x:Type igDP:FieldChooserEntry}">
                            <DockPanel>
                                <igEditors:XamCheckEditor x:Name="checkBox" DockPanel.Dock="Left" IsThreeState="false" Value="{Binding Path=IsVisible, Mode=TwoWay}"/>
                                    <igDP:LabelPresenter x:Name="label" IsInFieldChooser="true" Field="{Binding Path=Field}" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" IsSelectedInFieldChooser="{Binding Path=IsSelected}" Margin="5,0,0,0" DockPanel.Dock="Left" ToolTip="{Binding RelativeSource={RelativeSource Self},Path=Content}">
                                    <igDP:LabelPresenter.InputBindings>
                                        <MouseBinding MouseAction="LeftDoubleClick" Command="{x:Static igDP:FieldChooserCommands.ToggleVisibility}"/>
                                    </igDP:LabelPresenter.InputBindings>
                                </igDP:LabelPresenter>
                            </DockPanel>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Path=DisplayHiddenFieldsOnly, RelativeSource={RelativeSource AncestorType={x:Type igDP:FieldChooser}}}" Value="true">
                                    <Setter TargetName="checkBox" Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate DataType="{x:Type igDP:FieldChooserGroup}">
                            <StackPanel x:Name="panel" ToolTip="{Binding FieldLayout.ToolTip}">
                                <TextBlock x:Name="fieldLayoutDescription" Text="{Binding Path=FieldLayout.Description}"/>
                                <StackPanel x:Name="filterPanel" Orientation="Horizontal" Visibility="Collapsed"> <Rectangle Width="20"/>
                                    <TextBlock Text="{Binding Path=FieldFilter.Description}" />
                                </StackPanel>
                            </StackPanel>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Path=HasFieldFilter}" Value="true">
                                    <Setter TargetName="panel" Property="ToolTip" Value="{Binding FieldFilter.ToolTip}" />
                                    <Setter TargetName="filterPanel" Property="Visibility" Value="Visible" />
                                    <Setter TargetName="fieldLayoutDescription" Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </Style.Resources>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type igDP:FieldChooser}">
                                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>
                                        <DockPanel Visibility="{TemplateBinding FieldGroupSelectorVisibilityResolved}" >
                                            <igEditors:XamCheckEditor x:Name="toggleAllCheckBox" DockPanel.Dock="Left" IsThreeState="false" Value="{Binding Path=AllCurrentFieldsVisible, RelativeSource={x:Static RelativeSource.TemplatedParent}, Mode=TwoWay}" Visibility="{Binding Path=DisplayHiddenFieldsOnly, RelativeSource={x:Static RelativeSource.TemplatedParent}, Converter={StaticResource NotBoolToVisConverter}, Mode=OneWay}" Margin="4,0,0,0"/>
                                            <igEditors:XamComboEditor x:Name="fieldGroupSelector" DockPanel.Dock="Right" ItemsSource="{TemplateBinding FieldGroups}" ValueType="{x:Type igDP:FieldChooserGroup}" DisplayValueSource="Value" Value="{Binding Path=CurrentFieldGroup, RelativeSource={x:Static RelativeSource.TemplatedParent}, Mode=TwoWay}" HorizontalAlignment="Stretch"/>
                                        </DockPanel>
                                        <igWindows:CardPanel Grid.Row="1">
                                            <Grid Name="Allocated">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                    <TextBox Name="FieldChooserUnAllocatedTextBox" TextChanged="TextBox_TextChanged" Loaded="TextBox_Loaded" />
                                                    <ScrollViewer Grid.Row="1">
                                                        <i:Interaction.Behaviors>
                                                            <behaviors:ScrollViewerBehavior/>
                                                        </i:Interaction.Behaviors>
                                                        <StackPanel>
                                                            <ListBox Loaded="GridUnAllocatedListBox_Loaded" Grid.Row="1" x:Name="PART_FieldsListBox" ItemsSource="{TemplateBinding CurrentFields}" SelectionMode="Single" SelectedItem="{Binding Path=SelectedField, RelativeSource={x:Static RelativeSource.TemplatedParent}, Mode=TwoWay}" HorizontalContentAlignment="Stretch">
                                                                <ListBox.ItemContainerStyle>
                                                                    <Style TargetType="{x:Type ListBoxItem}">
                                                                        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                                                                    <Setter Property="Template">
                                                                        <Setter.Value>
                                                                            <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                                                                <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                                                                                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                                </Border>
                                                                            </ControlTemplate>
                                                                        </Setter.Value>
                                                                    </Setter>
                                                                    </Style>
                                                                </ListBox.ItemContainerStyle>
                                                            <ListBox.InputBindings>
                                                                <KeyBinding Key="Space" Command="{x:Static igDP:FieldChooserCommands.ToggleVisibility}"/>
                                                            </ListBox.InputBindings>
                                                            </ListBox>
                                                        </StackPanel>
                                                </ScrollViewer>
                                                <Border x:Name="highlightBorder" BorderThickness="2" BorderBrush="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                                            </Grid>
                                        </igWindows:CardPanel>
                                    </Grid>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsDraggingItem" Value="true">
                                        <Setter TargetName="highlightBorder" Property="BorderBrush" Value="{DynamicResource {x:Static igDP:DataPresenterBrushKeys.FieldChooserDragBorderBrushKey}}" />
                                    </Trigger>
                                    <Trigger Property="IsDraggingItemFromDataPresenter" Value="true">
                                        <Setter TargetName="highlightBorder" Property="BorderBrush" Value="{DynamicResource {x:Static igDP:DataPresenterBrushKeys.FieldChooserDragBorderBrushKey}}" />
                                    </Trigger>
                                    <Trigger Property="IsDragItemOver" Value="true">
                                        <Setter TargetName="highlightBorder" Property="BorderBrush" Value="{DynamicResource {x:Static igDP:DataPresenterBrushKeys.FieldChooserDragBorderBrushKey}}" />
                                    </Trigger>
                                    <DataTrigger Binding="{Binding Path=CurrentFields.Count, RelativeSource={RelativeSource Self}}" Value="0" >
                                        <Setter TargetName="toggleAllCheckBox" Property="IsEnabled" Value="false" />
                                    </DataTrigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
                <bindingProxy:BindingProxy x:Key="proxy" Data="{Binding}"/>
                <Style x:Key="defaultFieldChooser" TargetType="{x:Type Custom:HeaderPrefixArea}">
                    <Setter Property="HorizontalAlignment" Value="Center"/>
                    <Setter Property="VerticalAlignment" Value="Center"/>
                    <Setter Property="Visibility" Value="Visible"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type Custom:HeaderPrefixArea}">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                                    <Button x:Name="fieldChooserButton" Style="{DynamicResource {x:Static Custom:DataPresenterBase.FieldChooserButtonStyleKey}}" CommandParameter="{TemplateBinding FieldLayout}" Visibility="Collapsed"/>
                                    <ContentPresenter Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"/>
                                    <CheckBox x:Name="IsUnAllocatedHeaderChecked" HorizontalAlignment="Center" VerticalAlignment="Center" IsChecked="{Binding Path=DataContext.IsUnAllocatedHeaderChecked, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                    </CheckBox>
                                </StackPanel>
                                <ControlTemplate.Triggers>
                                    <DataTrigger Binding="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=FieldLayout.HeaderPrefixAreaDisplayModeResolved}" Value="FieldChooserButton">
                                        <Setter TargetName="fieldChooserButton" Property="Visibility" Value="Visible" />
                                        <Setter TargetName="fieldChooserButton" Property="Command" Value="{x:Static Custom:DataPresenterCommands.ShowFieldChooser}" />
                                    </DataTrigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
                <Style x:Key="HideHeaderPrefixArea" TargetType="{x:Type Custom:HeaderPrefixArea}" BasedOn="{x:Null}">
                    <Setter Property="Visibility" Value="Collapsed" />
                </Style>
                <Style TargetType="{x:Type Custom:FilterButton}" BasedOn="{StaticResource FilterIcon}"/>
                <Style x:Key="HideRecordSelector" TargetType="{x:Type Custom:RecordSelector}" BasedOn="{x:Null}">
                    <Setter Property="Visibility" Value="Collapsed" />
                </Style>
                <Style TargetType="{x:Type igEditors:XamNumericEditor}">
                    <Setter Property="ValueToDisplayTextConverter" Value="{StaticResource PrecisionFormatDisplayConverter}"/>
                    <Setter Property="Tag" Value="{Binding Data.PrecisionFormat, Source={StaticResource proxy}}"></Setter>
                    <Setter Property="Mask" Value="{}{char:15:0-9.}"/>
                    <Setter Property="PromptChar" Value=""/>
                </Style>
                <Style x:Key="CommissionColumnPrecision" TargetType="{x:Type igEditors:XamNumericEditor}">
                    <Setter Property="ValueToDisplayTextConverter" Value="{StaticResource PrecisionFormatDisplayConverter}"/>
                        <Setter Property="Tag" Value="{Binding Data.PrecisionFormat, Source={StaticResource proxy}}"></Setter>
                    <Setter Property="Mask" Value="{}{char:15:-0-9.}"/>
                    <Setter Property="PromptChar" Value=""/>
                </Style>
                    <Style x:Key="QtyColumnPrecision" TargetType="{x:Type igEditors:XamNumericEditor}">
                        <Setter Property="ValueToDisplayTextConverter" Value="{StaticResource PrecisionFormatDisplayConverter}"/>
                        <Setter Property="Tag" Value="{Binding Data.QtyPrecisionFormat, Source={StaticResource proxy}}"></Setter>
                        <Setter Property="Mask" Value="{}{char:15:0-9.}"/>
                        <Setter Property="PromptChar" Value=""/>
                    </Style>
                    <Style TargetType="{x:Type igDP:DataRecordPresenter}">
                    <EventSetter Event="MouseRightButtonDown" Handler="DataRecordPresenter_MouseRightButtonDown" />
                </Style>
                </Custom:XamDataGrid.Resources>
                <Custom:XamDataGrid.FieldLayouts>
                <Custom:FieldLayout>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.NETAMOUNT_LOCAL}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_NETAMOUNT_LOCAL}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.NETAMOUNT_BASE}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_NETAMOUNT_BASE}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.PRINCIPAL_AMOUNT_LOCAL}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_PRINCIPAL_AMOUNT_LOCAL}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.PRINCIPAL_AMOUNT_BASE}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_PRINCIPAL_AMOUNT_BASE}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.COUNTER_CURRENCY}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_COUNTER_CURRENCY}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.COUNTER_CURRENCY_AMOUNT}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_COUNTER_CURRENCY_AMOUNT}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <!--Custom:Field Name="{x:Static Constants:AllocationUIConstants.AVGPRICE_BASE}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_AVGPRICE_BASE}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/-->
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.EXECUTION_TIME}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_EXECUTION_TIME}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.FACTSET_SYMBOL}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_FACTSET_SYMBOL}" AllowEdit="False" />
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.ACTIV_SYMBOL}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_ACTIV_SYMBOL}" AllowEdit="False" />
					<Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.ORDER_SIDE}">
                        <Custom:TemplateField.DisplayTemplate>
                            <DataTemplate>
                                <TextBlock Text="{igEditors:TemplateEditorValueBinding}"/>
                            </DataTemplate>
                        </Custom:TemplateField.DisplayTemplate>
                        <Custom:TemplateField.EditTemplate>
                            <DataTemplate>
                                <igEditors:XamComboEditor ItemsSource="{Binding Data.Sides, Source={StaticResource proxy}}" DisplayMemberPath="Value"
                                                              IsAlwaysInEditMode="True"
                                                              Value="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,  Converter={StaticResource StringToKeyValuePairValueConverter}, ConverterParameter={x:Static Constants:AllocationUIConstants.ORDER_SIDE}}"/>
                            </DataTemplate>
                        </Custom:TemplateField.EditTemplate>
                    </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TRANSACTION_TYPE}">
                        <Custom:TemplateField.DisplayTemplate>
                            <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource DictionaryValueToKeyConverter}, ConverterParameter={x:Static Constants:AllocationUIConstants.TRANSACTION_TYPE}}"/>
                            </DataTemplate>
                        </Custom:TemplateField.DisplayTemplate>
                        <Custom:TemplateField.EditTemplate>
                            <DataTemplate>
                                <igEditors:XamComboEditor ItemsSource="{Binding Data.TransactionType, Source={StaticResource proxy}}" DisplayMemberPath="Value"
                                                              IsAlwaysInEditMode="True"
                                                              Value="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,  Converter={StaticResource StringToKeyValuePairValueConverter}, ConverterParameter={x:Static Constants:AllocationUIConstants.TRANSACTION_TYPE}}"/>
                            </DataTemplate>
                        </Custom:TemplateField.EditTemplate>
                    </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.COUNTERPARTY_NAME}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{igEditors:TemplateEditorValueBinding}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <igEditors:XamComboEditor ItemsSource="{Binding Data.CounterParty, Source={StaticResource proxy}}" DisplayMemberPath="Value"
                                                                  IsAlwaysInEditMode="True"
                                                                  Value="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,  Converter={StaticResource IntToKeyValuePairValueConverter}, ConverterParameter='Broker'}"/>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.BorrowerBroker}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{igEditors:TemplateEditorValueBinding}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <igEditors:XamComboEditor ItemsSource="{Binding Data.ThirdParty, Source={StaticResource proxy}}" DisplayMemberPath="Value"
                                                                  IsAlwaysInEditMode="True"
                                                                  Value="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,  Converter={StaticResource IntToKeyValuePairValueConverter}, ConverterParameter='BorrowerBroker'}"/>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.VENUE}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{igEditors:TemplateEditorValueBinding}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <igEditors:XamComboEditor ItemsSource="{Binding Data.Venues, Source={StaticResource proxy}}" DisplayMemberPath="Value"
                                                                  IsAlwaysInEditMode="True"
                                                                  Value="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,  Converter={StaticResource IntToKeyValuePairValueConverter}, ConverterParameter='Venue'}"/>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.FX_CONVERSION_METHOD_OPERATOR}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{igEditors:TemplateEditorValueBinding}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <igEditors:XamComboEditor ItemsSource="{Binding Data.FxConversionOperator, Source={StaticResource proxy}}" DisplayMemberPath="DisplayText"
                                                                  IsAlwaysInEditMode="True" DisplayValueSource="SelectedItem"
                                                                  Value="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,  Converter={StaticResource EnumToEnumerationValueConverter}, ConverterParameter='FxConversionOperator'}"/>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute1}" Label="{Binding Data.TradeAttributeCaption1, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[0], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[0], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                                                  SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute2}" Label="{Binding Data.TradeAttributeCaption2, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[1], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[1], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                                                  SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute3}" Label="{Binding Data.TradeAttributeCaption3, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[2], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[2], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                                                  SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute4}" Label="{Binding Data.TradeAttributeCaption4, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[3], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[3], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                                                  SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute5}" Label="{Binding Data.TradeAttributeCaption5, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[4], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[4], Source={StaticResource proxy}}"  AllowMultipleSelection="False" 
                                                                  SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute6}" Label="{Binding Data.TradeAttributeCaption6, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[5], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[5], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                          SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute7}" Label="{Binding Data.AdditionalTradeAttributesCaptions[7], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[6], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[6], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute8}" Label="{Binding Data.AdditionalTradeAttributesCaptions[8], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[7], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[7], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute9}" Label="{Binding Data.AdditionalTradeAttributesCaptions[9], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[8], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[8], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute10}" Label="{Binding Data.AdditionalTradeAttributesCaptions[10], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[9], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[9], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute11}" Label="{Binding Data.AdditionalTradeAttributesCaptions[11], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[10], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[10], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute12}" Label="{Binding Data.AdditionalTradeAttributesCaptions[12], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[11], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[11], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute13}" Label="{Binding Data.AdditionalTradeAttributesCaptions[13], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[12], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[12], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute14}" Label="{Binding Data.AdditionalTradeAttributesCaptions[14], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[13], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[13], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute15}" Label="{Binding Data.AdditionalTradeAttributesCaptions[15], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[14], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[14], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute16}" Label="{Binding Data.AdditionalTradeAttributesCaptions[16], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[15], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[15], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute17}" Label="{Binding Data.AdditionalTradeAttributesCaptions[17], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[16], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[16], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute18}" Label="{Binding Data.AdditionalTradeAttributesCaptions[18], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[17], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[17], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute19}" Label="{Binding Data.AdditionalTradeAttributesCaptions[19], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[18], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[18], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute20}" Label="{Binding Data.AdditionalTradeAttributesCaptions[20], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[19], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[19], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute21}" Label="{Binding Data.AdditionalTradeAttributesCaptions[21], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[20], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[20], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute22}" Label="{Binding Data.AdditionalTradeAttributesCaptions[22], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[21], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[21], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute23}" Label="{Binding Data.AdditionalTradeAttributesCaptions[23], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[22], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[22], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute24}" Label="{Binding Data.AdditionalTradeAttributesCaptions[24], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[23], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[23], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute25}" Label="{Binding Data.AdditionalTradeAttributesCaptions[25], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[24], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[24], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute26}" Label="{Binding Data.AdditionalTradeAttributesCaptions[26], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[25], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[25], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute27}" Label="{Binding Data.AdditionalTradeAttributesCaptions[27], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[26], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[26], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute28}" Label="{Binding Data.AdditionalTradeAttributesCaptions[28], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[27], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[27], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute29}" Label="{Binding Data.AdditionalTradeAttributesCaptions[29], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[28], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[28], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute30}" Label="{Binding Data.AdditionalTradeAttributesCaptions[30], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[29], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[29], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute31}" Label="{Binding Data.AdditionalTradeAttributesCaptions[31], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[30], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[30], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute32}" Label="{Binding Data.AdditionalTradeAttributesCaptions[32], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[31], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[31], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute33}" Label="{Binding Data.AdditionalTradeAttributesCaptions[33], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[32], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[32], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute34}" Label="{Binding Data.AdditionalTradeAttributesCaptions[34], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[33], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[33], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute35}" Label="{Binding Data.AdditionalTradeAttributesCaptions[35], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[34], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[34], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute36}" Label="{Binding Data.AdditionalTradeAttributesCaptions[36], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[35], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[35], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute37}" Label="{Binding Data.AdditionalTradeAttributesCaptions[37], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[36], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[36], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute38}" Label="{Binding Data.AdditionalTradeAttributesCaptions[38], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[37], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[37], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute39}" Label="{Binding Data.AdditionalTradeAttributesCaptions[39], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[38], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[38], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute40}" Label="{Binding Data.AdditionalTradeAttributesCaptions[40], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[39], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[39], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute41}" Label="{Binding Data.AdditionalTradeAttributesCaptions[41], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[40], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[40], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute42}" Label="{Binding Data.AdditionalTradeAttributesCaptions[42], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[41], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[41], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute43}" Label="{Binding Data.AdditionalTradeAttributesCaptions[43], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[42], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[42], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute44}" Label="{Binding Data.AdditionalTradeAttributesCaptions[44], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[43], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[43], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute45}" Label="{Binding Data.AdditionalTradeAttributesCaptions[45], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[44], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[44], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.SETTLEMENT_CURRENCY}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_SETTLEMENT_CURRENCY}" AllowEdit="False" BindingType="Unbound"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.IS_PREALLOCATED}" EditAsType="{x:Type sys:String}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.IS_MANUAL_GROUP}" EditAsType="{x:Type sys:String}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.IS_ANOTHER_TAXLOT_ATTRIBUTES_UPDATED}" EditAsType="{x:Type sys:String}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.ISNDF}" EditAsType="{x:Type sys:String}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.GROUP_ID}" HorizontalContentAlignment="Right"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.M2M_PROFIT_LOSS}" EditAsType="{x:Type sys:Double}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.PUT_OR_CALL}" EditAsType="{x:Type sys:String}"  Converter="{StaticResource IntegerToStringConverter}" ConverterParameter="{x:Static Constants:AllocationUIConstants.PUT_OR_CALL}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.GROUP_STATUS}" EditAsType="{x:Type sys:String}"  Converter="{StaticResource EnumToStringConverter}" ConverterParameter="{x:Static Constants:AllocationUIConstants.GROUP_STATUS}"/>
                    </Custom:FieldLayout>
                </Custom:XamDataGrid.FieldLayouts>
            <Custom:XamDataGrid.ViewSettings>
                <Custom:GridViewSettings/>
            </Custom:XamDataGrid.ViewSettings>
                <Custom:XamDataGrid.FieldLayoutSettings>
                <Custom:FieldLayoutSettings FilterUIType="LabelIcons" HeaderPrefixAreaStyle="{StaticResource defaultFieldChooser}" HeaderPrefixAreaDisplayMode="FieldChooserButton" HighlightAlternateRecords="True" AllowDelete="False">
                    </Custom:FieldLayoutSettings>
                </Custom:XamDataGrid.FieldLayoutSettings>
                <Custom:XamDataGrid.FieldSettings>
                <Custom:FieldSettings AllowFixing="Near" ExpandableFieldRecordExpansionMode="ExpandAlways" ExpandableFieldRecordHeaderDisplayMode="NeverDisplayHeader" AllowRecordFiltering="True" CellClickAction="EnterEditModeIfAllowed"/>
            </Custom:XamDataGrid.FieldSettings>
            <i:Interaction.Behaviors>
                    <commonBehaviours:XamDataGridExporter ExportFilePath="{Binding ExportFilePathForAutomation}" ExportGridData="{Binding Path=ExportDataGridUnallocated, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ExportGroups="{Binding Path=ExportGridUnAllocatedGrid, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ExporterResource="{Binding Mode=OneWay, Source={StaticResource Exporter}}" AssetsWithCommissionInNetAmountList="{Binding Path=AssetsWithCommissionInNetAmountList, Mode=TwoWay}"/>
                    <behaviors:AllocationGridsExporter ExportGrid="{Binding Path=ExportBothGrids, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ExporterResource="{Binding Mode=OneWay, Source={StaticResource UnallocatedGridExporter}}" AssetsWithCommissionInNetAmountList="{Binding Path=AssetsWithCommissionInNetAmountList, Mode=TwoWay}"/>
                    <behaviors:UnallocatedGridBehavior IsRefreshAfterGetData="{Binding Path=IsRefreshAfterGetData, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" AllowEditGrid="{Binding Path=AllowEditGrid, Mode=TwoWay}" TotalNoOfTradesUnAllocatedGrid="{Binding Path=TotalNoOfTradesUnAllocatedGrid, Mode=TwoWay}" SelectedNoOfTradesUnAllocatedGrid="{Binding Path=SelectedNoOfTradesUnAllocatedGrid, Mode=TwoWay}" EndEditModeAndCommitChanges="{Binding Path=EndEditModeAndCommitChanges, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  IsGroupMenuEnabled="{Binding Path=IsGroupMenuEnabled, Mode=TwoWay}" IsUnGroupMenuEnabled="{Binding Path=IsUnGroupMenuEnabled, Mode=TwoWay}" IsExpandCollapseAll="{Binding Path= IsExpandCollapseAll, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  IsSaveLayoutUnallocatedGrid="{Binding Path=IsSaveLayoutUnallocatedGrid, Mode=TwoWay}" IsClearAllocatedSelectedItems="{Binding Path=IsClearAllocatedSelectedItems, Mode=TwoWay}" AssetsWithCommissionInNetAmountList="{Binding Path=AssetsWithCommissionInNetAmountList, Mode=TwoWay}" IsUnAllocatedHeaderChecked="{Binding Path=IsUnAllocatedHeaderChecked, Mode=TwoWay}" IsUnAllocatedSecurityMasterEnabled="{Binding Path=IsUnAllocatedSecurityMasterEnabled, Mode=TwoWay}" IsUnAllocatedAuditTrailEnabled="{Binding Path=IsUnAllocatedAuditTrailEnabled, Mode=TwoWay}" />
                <behaviors:XamDataGridClearFilters IsFiltersCleared="{Binding Path=IsFiltersClearedForUnAllocatedGrid,Mode=TwoWay}" />
            </i:Interaction.Behaviors>
            <Custom:XamDataGrid.ContextMenu>
                    <ContextMenu Visibility="Visible">
                        <MenuItem Header="Delete" Visibility="{Binding Path=DeleteMenuVisibility}" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_DELETE}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Group" IsEnabled="{Binding Path=IsGroupMenuEnabled}" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_GROUP}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Ungroup" IsEnabled="{Binding Path=IsUnGroupMenuEnabled}" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_UNGROUP}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Export Data" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.EXPORTDATA_UNALLOCATED}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Save Layout" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_SAVE_LAYOUT}"></Binding>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.UNALLOCATED_GRID}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Security Master" IsEnabled="{Binding Path=IsUnAllocatedSecurityMasterEnabled}" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_SYMBOL_LOOKUP}"></Binding>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.UNALLOCATED_GRID}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Audit Trail" IsEnabled="{Binding Path=IsUnAllocatedAuditTrailEnabled}" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_AUDIT_TRAIL}"></Binding>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.UNALLOCATED_GRID}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Expand/ Collapse All" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_EXPAND_COLLAPSE}"></Binding>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.UNALLOCATED_GRID}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Clear Filters" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.CLEAR_FILTERS}"></Binding>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.UNALLOCATED_GRID}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                    </ContextMenu>
                </Custom:XamDataGrid.ContextMenu>
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="CellActivated">
                        <i:InvokeCommandAction Command="{Binding Path=AllocationGroupClicked, Mode=TwoWay}" CommandParameter="{Binding Path=ActiveDataItem, RelativeSource={RelativeSource AncestorType={x:Type Custom:XamDataGrid}}}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </Custom:XamDataGrid>
        </Grid>
        <GridSplitter Grid.Row="1" ResizeDirection="Auto" Height="4" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Visibility="Visible" Margin="0"/>
        <Grid Grid.Row="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Label Content="Allocated Trades" Grid.Row="0"  HorizontalAlignment="Left"/>
            <Custom:XamDataGrid Name="GridAllocated" Grid.Row="1" ScrollingMode="Immediate" HorizontalAlignment="Stretch" DataSource="{Binding Path=AllocatedGroupsCollection, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" GroupByAreaLocation="None" SelectedDataItemsScope="RecordsOnly"  RecordSelectorExtent="30" ActiveDataItem="{Binding Path=ActiveAllocatedDataItem, Mode=TwoWay}" Background="#FFE7E8E9" CellContainerGenerationMode="Recycle" RecordContainerGenerationMode="Recycle" >
            <Custom:XamDataGrid.Resources>
                    <Style TargetType="{x:Type igDP:FieldChooser}" >
                    <Style.Resources>
                        <DataTemplate DataType="{x:Type igDP:FieldChooserEntry}">
                            <DockPanel>
                                <igEditors:XamCheckEditor x:Name="checkBox" DockPanel.Dock="Left" IsThreeState="false" Value="{Binding Path=IsVisible, Mode=TwoWay}"/>
                                    <igDP:LabelPresenter x:Name="label" IsInFieldChooser="true" Field="{Binding Path=Field}" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" IsSelectedInFieldChooser="{Binding Path=IsSelected}" Margin="5,0,0,0" DockPanel.Dock="Left" ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Content}" >
                                    <igDP:LabelPresenter.InputBindings>
                                        <MouseBinding MouseAction="LeftDoubleClick" Command="{x:Static igDP:FieldChooserCommands.ToggleVisibility}"/>
                                    </igDP:LabelPresenter.InputBindings>
                                </igDP:LabelPresenter>
                            </DockPanel>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Path=DisplayHiddenFieldsOnly, RelativeSource={RelativeSource AncestorType={x:Type igDP:FieldChooser}}}" Value="true">
                                    <Setter TargetName="checkBox" Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate DataType="{x:Type igDP:FieldChooserGroup}">
                            <StackPanel x:Name="panel" ToolTip="{Binding FieldLayout.ToolTip}">
                                <TextBlock x:Name="fieldLayoutDescription" Text="{Binding Path=FieldLayout.Description}"/>
                                <StackPanel x:Name="filterPanel" Orientation="Horizontal" Visibility="Collapsed">
                                    <Rectangle Width="20"/>
                                    <TextBlock Text="{Binding Path=FieldFilter.Description}" />
                                </StackPanel>
                            </StackPanel>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Path=HasFieldFilter}" Value="true">
                                    <Setter TargetName="panel" Property="ToolTip" Value="{Binding FieldFilter.ToolTip}" />
                                    <Setter TargetName="filterPanel" Property="Visibility" Value="Visible" />
                                    <Setter TargetName="fieldLayoutDescription" Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </Style.Resources>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type igDP:FieldChooser}">
                                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>
                                        <DockPanel Visibility="{TemplateBinding FieldGroupSelectorVisibilityResolved}" >
                                                <igEditors:XamCheckEditor x:Name="toggleAllCheckBox" DockPanel.Dock="Left" IsThreeState="false" Value="{Binding Path=AllCurrentFieldsVisible, RelativeSource={x:Static RelativeSource.TemplatedParent}, Mode=TwoWay}" Visibility="{Binding Path=DisplayHiddenFieldsOnly, RelativeSource={x:Static RelativeSource.TemplatedParent}, Converter={StaticResource NotBoolToVisConverter}, Mode=OneWay}" Margin="4,0,0,0"/>
                                                <igEditors:XamComboEditor SelectedItemChanged="fieldGroupSelector_SelectedItemChanged" x:Name="fieldGroupSelector" DockPanel.Dock="Right" ItemsSource="{TemplateBinding FieldGroups}" ValueType="{x:Type igDP:FieldChooserGroup}" DisplayValueSource="Value" Value="{Binding Path=CurrentFieldGroup, RelativeSource={x:Static RelativeSource.TemplatedParent}, Mode=TwoWay}" HorizontalAlignment="Stretch"/>
                                        </DockPanel>
                                        <igWindows:CardPanel Grid.Row="1">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                    <TextBox Name="FieldChooserAllocatedTextBox" TextChanged="TextBox_TextChanged" Loaded="TextBox_Loaded" />
                                                    <ScrollViewer Grid.Row="1">
                                                        <i:Interaction.Behaviors>
                                                            <behaviors:ScrollViewerBehavior/>
                                                        </i:Interaction.Behaviors>
                                                        <StackPanel>
                                                            <ListBox Grid.Row="1" x:Name="PART_FieldsListBox" Loaded="GridAllocatedListBox_Loaded" ItemsSource="{TemplateBinding CurrentFields}" SelectionMode="Single" SelectedItem="{Binding Path=SelectedField, RelativeSource={x:Static RelativeSource.TemplatedParent}, Mode=TwoWay}" HorizontalContentAlignment="Stretch">
                                                            <ListBox.ItemContainerStyle>
                                                                <Style TargetType="{x:Type ListBoxItem}">
                                                                    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                                                                    <Setter Property="Template">
                                                                        <Setter.Value>
                                                                            <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                                                                <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                                                                                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                                </Border>
                                                                            </ControlTemplate>
                                                                        </Setter.Value>
                                                                    </Setter>
                                                                </Style>
                                                            </ListBox.ItemContainerStyle>
                                                            <ListBox.InputBindings>
                                                                <KeyBinding Key="Space" Command="{x:Static igDP:FieldChooserCommands.ToggleVisibility}"/>
                                                            </ListBox.InputBindings>
                                                        </ListBox>
                                                    </StackPanel>
                                                </ScrollViewer>
                                                <Border x:Name="highlightBorder" BorderThickness="2" BorderBrush="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                                            </Grid>
                                        </igWindows:CardPanel>
                                    </Grid>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsDraggingItem" Value="true">
                                        <Setter TargetName="highlightBorder" Property="BorderBrush" Value="{DynamicResource {x:Static igDP:DataPresenterBrushKeys.FieldChooserDragBorderBrushKey}}" />
                                    </Trigger>
                                    <Trigger Property="IsDraggingItemFromDataPresenter" Value="true">
                                        <Setter TargetName="highlightBorder" Property="BorderBrush" Value="{DynamicResource {x:Static igDP:DataPresenterBrushKeys.FieldChooserDragBorderBrushKey}}" />
                                    </Trigger>
                                    <Trigger Property="IsDragItemOver" Value="true">
                                        <Setter TargetName="highlightBorder" Property="BorderBrush" Value="{DynamicResource {x:Static igDP:DataPresenterBrushKeys.FieldChooserDragBorderBrushKey}}" />
                                    </Trigger>
                                    <DataTrigger Binding="{Binding Path=CurrentFields.Count, RelativeSource={RelativeSource Self}}" Value="0" >
                                        <Setter TargetName="toggleAllCheckBox" Property="IsEnabled" Value="false" />
                                    </DataTrigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
                <bindingProxy:BindingProxy x:Key="proxy" Data="{Binding}"/>
                <Style x:Key="defaultFieldChooser" TargetType="{x:Type Custom:HeaderPrefixArea}">
                    <Setter Property="HorizontalAlignment" Value="Center"/>
                    <Setter Property="VerticalAlignment" Value="Center"/>
                    <Setter Property="Visibility" Value="Visible"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type Custom:HeaderPrefixArea}">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                                    <Button x:Name="fieldChooserButton" Style="{DynamicResource {x:Static Custom:DataPresenterBase.FieldChooserButtonStyleKey}}" CommandParameter="{TemplateBinding FieldLayout}" Visibility="Collapsed"/>
                                    <ContentPresenter Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"/>
                                    <CheckBox x:Name="IsAllocatedHeaderChecked" HorizontalAlignment="Center" VerticalAlignment="Center" IsChecked="{Binding Path=DataContext.IsAllocatedHeaderChecked, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                    </CheckBox>
                                </StackPanel>
                                <ControlTemplate.Triggers>
                                    <DataTrigger Binding="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=FieldLayout.HeaderPrefixAreaDisplayModeResolved}" Value="FieldChooserButton">
                                        <Setter TargetName="fieldChooserButton" Property="Visibility" Value="Visible" />
                                        <Setter TargetName="fieldChooserButton" Property="Command" Value="{x:Static Custom:DataPresenterCommands.ShowFieldChooser}" />
                                    </DataTrigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
                <Style x:Key="HideHeaderPrefixArea" TargetType="{x:Type Custom:HeaderPrefixArea}" BasedOn="{x:Null}">
                    <Setter Property="Visibility" Value="Collapsed" />
                </Style>
                <Style TargetType="{x:Type Custom:FilterButton}" BasedOn="{StaticResource FilterIcon}"/>
                <Style x:Key="HideRecordSelector" TargetType="{x:Type Custom:RecordSelector}" BasedOn="{x:Null}">
                    <Setter Property="Visibility" Value="Collapsed" />
                </Style>
                <Style TargetType="{x:Type igEditors:XamNumericEditor}">
                    <Setter Property="ValueToDisplayTextConverter" Value="{StaticResource PrecisionFormatDisplayConverter}"/>
                        <Setter Property="Tag" Value="{Binding Data.PrecisionFormat, Source={StaticResource proxy}}"></Setter>
                    <Setter Property="Mask" Value="{}{char:15:0-9.}"/>
                    <Setter Property="PromptChar" Value=""/>
                </Style>
                <Style x:Key="CommissionColumnPrecision" TargetType="{x:Type igEditors:XamNumericEditor}">
                    <Setter Property="ValueToDisplayTextConverter" Value="{StaticResource PrecisionFormatDisplayConverter}"/>
                        <Setter Property="Tag" Value="{Binding Data.PrecisionFormat, Source={StaticResource proxy}}"></Setter>
                    <Setter Property="Mask" Value="{}{char:15:-0-9.}"/>
                    <Setter Property="PromptChar" Value=""/>
                </Style>
                <Style x:Key="QtyColumnPrecision" TargetType="{x:Type igEditors:XamNumericEditor}">
                    <Setter Property="ValueToDisplayTextConverter" Value="{StaticResource PrecisionFormatDisplayConverter}"/>
                        <Setter Property="Tag" Value="{Binding Data.PrecisionFormat, Source={StaticResource proxy}}"></Setter>
                    <Setter Property="Mask" Value="{}{char:15:0-9.}"/>
                    <Setter Property="PromptChar" Value=""/>
                    </Style>
                <Style TargetType="{x:Type igDP:DataRecordPresenter}">
                    <EventSetter Event="MouseRightButtonDown" Handler="DataRecordPresenter_MouseRightButtonDown" />
                    <EventSetter Event="MouseDoubleClick" Handler="DataRecordPresenter_MouseDoubleClick" />
                </Style>
            </Custom:XamDataGrid.Resources>
            <i:Interaction.Behaviors>
                    <commonBehaviours:XamDataGridExporter ExportFilePath="{Binding ExportFilePathForAutomation}" ExportGridData="{Binding Path=ExportDataGridAllocated, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ExportGrid="{Binding Path=ExportGridAllocatedGrid, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ExporterResource="{Binding Mode=OneWay, Source={StaticResource Exporter}}" AssetsWithCommissionInNetAmountList="{Binding Path=AssetsWithCommissionInNetAmountList, Mode=TwoWay}" ExportTaxlots="{Binding Path=ExportGridTaxlots, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ExportGroups="{Binding Path=ExportGridGroups, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                    <behaviors:AllocationGridsExporter ExportGrid="{Binding Path=ExportBothGrids, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ExporterResource="{Binding Mode=OneWay, Source={StaticResource AllocatedGridExporter}}" AssetsWithCommissionInNetAmountList="{Binding Path=AssetsWithCommissionInNetAmountList, Mode=TwoWay}"/>
                    <behaviors:AllocatedGridBehavior IsRefreshAfterGetData="{Binding Path=IsRefreshAfterGetData, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" AllowEditGrid="{Binding Path=AllowEditGrid, Mode=TwoWay}" TotalNoOfTradesAllocatedGrid="{Binding Path=TotalNoOfTradesAllocatedGrid, Mode=TwoWay}" SelectedNoOfTradesAllocatedGrid="{Binding Path=SelectedNoOfTradesAllocatedGrid, Mode=TwoWay}" EndEditModeAndCommitChanges="{Binding Path=EndEditModeAndCommitChanges, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" UnallocateMenuVisibility="{Binding Path=UnallocateMenuVisibility, Mode=TwoWay}" IsAllocatedUnGroupMenuEnabled="{Binding Path=IsAllocatedUnGroupMenuEnabled, Mode=TwoWay}"  IsExpandCollapseAllocatedGrid="{Binding Path= IsExpandCollapseAllocatedGrid, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsSaveLayoutAllocatedGrid="{Binding Path=IsSaveLayoutAllocatedGrid, Mode=TwoWay}" IsClearUnAllocatedSelectedItems="{Binding Path=IsClearUnAllocatedSelectedItems, Mode=TwoWay}" AssetsWithCommissionInNetAmountList="{Binding Path=AssetsWithCommissionInNetAmountList, Mode=TwoWay}" IsAllocatedHeaderChecked="{Binding Path=IsAllocatedHeaderChecked, Mode=TwoWay}" IsAllocatedSecurityMasterEnabled="{Binding Path=IsAllocatedSecurityMasterEnabled, Mode=TwoWay}" IsAllocatedAuditTrailEnabled="{Binding Path=IsAllocatedAuditTrailEnabled, Mode=TwoWay}" IsAllocatedCloseOrderEnabled="{Binding Path=IsAllocatedCloseOrderEnabled, Mode=TwoWay}"/>
                <behaviors:XamDataGridClearFilters IsFiltersCleared="{Binding Path=IsFiltersClearedForAllocatedGrid,Mode=TwoWay}" />
            </i:Interaction.Behaviors>
            <Custom:XamDataGrid.ViewSettings>
                <Custom:GridViewSettings/>
            </Custom:XamDataGrid.ViewSettings>
            <Custom:XamDataGrid.FieldLayoutSettings>
                    <Custom:FieldLayoutSettings FilterUIType="LabelIcons" HeaderPrefixAreaStyle="{StaticResource defaultFieldChooser}" HeaderPrefixAreaDisplayMode="FieldChooserButton" HighlightAlternateRecords="True" AllowDelete="False"/>
            </Custom:XamDataGrid.FieldLayoutSettings>
            <Custom:XamDataGrid.FieldSettings>
                    <Custom:FieldSettings AllowFixing="Near" ExpandableFieldRecordExpansionMode="ExpandAlways" ExpandableFieldRecordHeaderDisplayMode="NeverDisplayHeader" AllowRecordFiltering="True" CellClickAction="EnterEditModeIfAllowed"/>
            </Custom:XamDataGrid.FieldSettings>
            <Custom:XamDataGrid.FieldLayouts>
                    <Custom:FieldLayout x:Name="AllocationGroup">
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.NETAMOUNT_LOCAL}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_NETAMOUNT_LOCAL}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.NETAMOUNT_BASE}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_NETAMOUNT_BASE}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.PRINCIPAL_AMOUNT_LOCAL}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_PRINCIPAL_AMOUNT_LOCAL}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.PRINCIPAL_AMOUNT_BASE}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_PRINCIPAL_AMOUNT_BASE}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.COUNTER_CURRENCY}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_COUNTER_CURRENCY}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.COUNTER_CURRENCY_AMOUNT}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_COUNTER_CURRENCY_AMOUNT}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <!--Custom:Field Name="{x:Static Constants:AllocationUIConstants.AVGPRICE_BASE}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_AVGPRICE_BASE}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/-->
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.EXECUTION_TIME}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_EXECUTION_TIME}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.FACTSET_SYMBOL}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_FACTSET_SYMBOL}" AllowEdit="False" />
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.ACTIV_SYMBOL}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_ACTIV_SYMBOL}" AllowEdit="False" />
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.COUNTERPARTY_NAME}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{igEditors:TemplateEditorValueBinding}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <igEditors:XamComboEditor ItemsSource="{Binding Data.CounterParty, Source={StaticResource proxy}}" DisplayMemberPath="Value"
                                                                  IsAlwaysInEditMode="True"
                                                                  Value="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,  Converter={StaticResource IntToKeyValuePairValueConverter}, ConverterParameter='Broker'}"/>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.BorrowerBroker}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{igEditors:TemplateEditorValueBinding}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <igEditors:XamComboEditor ItemsSource="{Binding Data.ThirdParty, Source={StaticResource proxy}}" DisplayMemberPath="Value"
                                                                  IsAlwaysInEditMode="True"
                                                                  Value="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,  Converter={StaticResource IntToKeyValuePairValueConverter}, ConverterParameter='BorrowerBroker'}"/>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.FX_CONVERSION_METHOD_OPERATOR}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{igEditors:TemplateEditorValueBinding}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <igEditors:XamComboEditor ItemsSource="{Binding Data.FxConversionOperator, Source={StaticResource proxy}}" DisplayMemberPath="DisplayText"
                                                                  IsAlwaysInEditMode="True"
                                                                  Value="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,  Converter={StaticResource EnumToEnumerationValueConverter}, ConverterParameter='FxConversionOperator'}"/>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TRANSACTION_TYPE}">
                        <Custom:TemplateField.DisplayTemplate>
                            <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource DictionaryValueToKeyConverter}, ConverterParameter={x:Static Constants:AllocationUIConstants.TRANSACTION_TYPE}}"/>
                            </DataTemplate>
                        </Custom:TemplateField.DisplayTemplate>
                        <Custom:TemplateField.EditTemplate>
                            <DataTemplate>
                                <igEditors:XamComboEditor ItemsSource="{Binding Data.TransactionType, Source={StaticResource proxy}}" DisplayMemberPath="Value"
                                                              IsAlwaysInEditMode="True"
                                                              Value="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,  Converter={StaticResource StringToKeyValuePairValueConverter}, ConverterParameter={x:Static Constants:AllocationUIConstants.TRANSACTION_TYPE}}"/>
                            </DataTemplate>
                        </Custom:TemplateField.EditTemplate>
                    </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute1}" Label="{Binding Data.TradeAttributeCaption1, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[0], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[0], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                                                  SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute2}" Label="{Binding Data.TradeAttributeCaption2, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[1], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[1], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                                                  SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute3}" Label="{Binding Data.TradeAttributeCaption3, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[2], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[2], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                                                  SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute4}" Label="{Binding Data.TradeAttributeCaption4, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[3], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[3], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                                                  SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute5}" Label="{Binding Data.TradeAttributeCaption5, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[4], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[4], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                                                  SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute6}" Label="{Binding Data.TradeAttributeCaption6, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[5], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[5], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                          SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute7}" Label="{Binding Data.AdditionalTradeAttributesCaptions[7], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[6], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[6], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute8}" Label="{Binding Data.AdditionalTradeAttributesCaptions[8], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[7], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[7], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute9}" Label="{Binding Data.AdditionalTradeAttributesCaptions[9], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[8], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[8], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute10}" Label="{Binding Data.AdditionalTradeAttributesCaptions[10], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[9], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[9], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute11}" Label="{Binding Data.AdditionalTradeAttributesCaptions[11], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[10], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[10], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute12}" Label="{Binding Data.AdditionalTradeAttributesCaptions[12], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[11], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[11], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute13}" Label="{Binding Data.AdditionalTradeAttributesCaptions[13], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[12], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[12], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute14}" Label="{Binding Data.AdditionalTradeAttributesCaptions[14], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[13], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[13], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute15}" Label="{Binding Data.AdditionalTradeAttributesCaptions[15], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[14], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[14], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute16}" Label="{Binding Data.AdditionalTradeAttributesCaptions[16], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[15], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[15], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute17}" Label="{Binding Data.AdditionalTradeAttributesCaptions[17], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[16], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[16], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute18}" Label="{Binding Data.AdditionalTradeAttributesCaptions[18], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[17], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[17], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute19}" Label="{Binding Data.AdditionalTradeAttributesCaptions[19], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[18], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[18], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute20}" Label="{Binding Data.AdditionalTradeAttributesCaptions[20], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[19], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[19], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute21}" Label="{Binding Data.AdditionalTradeAttributesCaptions[21], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[20], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[20], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute22}" Label="{Binding Data.AdditionalTradeAttributesCaptions[22], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[21], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[21], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute23}" Label="{Binding Data.AdditionalTradeAttributesCaptions[23], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[22], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[22], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute24}" Label="{Binding Data.AdditionalTradeAttributesCaptions[24], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[23], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[23], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute25}" Label="{Binding Data.AdditionalTradeAttributesCaptions[25], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[24], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[24], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute26}" Label="{Binding Data.AdditionalTradeAttributesCaptions[26], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[25], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[25], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute27}" Label="{Binding Data.AdditionalTradeAttributesCaptions[27], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[26], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[26], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute28}" Label="{Binding Data.AdditionalTradeAttributesCaptions[28], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[27], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[27], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute29}" Label="{Binding Data.AdditionalTradeAttributesCaptions[29], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[28], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[28], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute30}" Label="{Binding Data.AdditionalTradeAttributesCaptions[30], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[29], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[29], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute31}" Label="{Binding Data.AdditionalTradeAttributesCaptions[31], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[30], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[30], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute32}" Label="{Binding Data.AdditionalTradeAttributesCaptions[32], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[31], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[31], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute33}" Label="{Binding Data.AdditionalTradeAttributesCaptions[33], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[32], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[32], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute34}" Label="{Binding Data.AdditionalTradeAttributesCaptions[34], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[33], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[33], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute35}" Label="{Binding Data.AdditionalTradeAttributesCaptions[35], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[34], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[34], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute36}" Label="{Binding Data.AdditionalTradeAttributesCaptions[36], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[35], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[35], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute37}" Label="{Binding Data.AdditionalTradeAttributesCaptions[37], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[36], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[36], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute38}" Label="{Binding Data.AdditionalTradeAttributesCaptions[38], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[37], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[37], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute39}" Label="{Binding Data.AdditionalTradeAttributesCaptions[39], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[38], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[38], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute40}" Label="{Binding Data.AdditionalTradeAttributesCaptions[40], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[39], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[39], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute41}" Label="{Binding Data.AdditionalTradeAttributesCaptions[41], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[40], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[40], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute42}" Label="{Binding Data.AdditionalTradeAttributesCaptions[42], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[41], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[41], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute43}" Label="{Binding Data.AdditionalTradeAttributesCaptions[43], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[42], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[42], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute44}" Label="{Binding Data.AdditionalTradeAttributesCaptions[44], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[43], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[43], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.TradeAttribute45}" Label="{Binding Data.AdditionalTradeAttributesCaptions[45], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Mode=TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <ig:XamComboEditor ItemsSource="{Binding Data.TradeAttributesCollection[44], Source={StaticResource proxy}}" IsEditable="True" CustomValueEnteredAction="{Binding Data.TradeAttributesKeepRecords[44], Source={StaticResource proxy}}" AllowMultipleSelection="False" 
                                        SelectedItem="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged}" MultiSelectValueDelimiter="|">
                                        <i:Interaction.Behaviors>
                                            <commonBehaviours:CustomValueXamComboEditorBehavior />
                                        </i:Interaction.Behaviors>
                                    </ig:XamComboEditor>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.SETTLEMENT_CURRENCY}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_SETTLEMENT_CURRENCY}" AllowEdit="False" BindingType="Unbound"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.IS_PREALLOCATED}" EditAsType="{x:Type sys:String}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.IS_MANUAL_GROUP}" EditAsType="{x:Type sys:String}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.IS_ANOTHER_TAXLOT_ATTRIBUTES_UPDATED}" EditAsType="{x:Type sys:String}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.ISNDF}" EditAsType="{x:Type sys:String}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.GROUP_ID}" HorizontalContentAlignment="Right"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.M2M_PROFIT_LOSS}" EditAsType="{x:Type sys:Double}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.PUT_OR_CALL}" EditAsType="{x:Type sys:String}" Converter="{StaticResource IntegerToStringConverter}" ConverterParameter="{x:Static Constants:AllocationUIConstants.PUT_OR_CALL}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.GROUP_STATUS}" EditAsType="{x:Type sys:String}"  Converter="{StaticResource EnumToStringConverter}" ConverterParameter="{x:Static Constants:AllocationUIConstants.GROUP_STATUS}"/>
                    </Custom:FieldLayout>
                <Custom:FieldLayout x:Name="TaxLots">
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.NETAMOUNT_LOCAL}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_NETAMOUNT_LOCAL}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedTaxlotColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.NETAMOUNT_BASE}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_NETAMOUNT_BASE}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedTaxlotColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.PRINCIPAL_AMOUNT_LOCAL}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_PRINCIPAL_AMOUNT_LOCAL}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedTaxlotColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.PRINCIPAL_AMOUNT_BASE}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_PRINCIPAL_AMOUNT_BASE}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedTaxlotColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.COUNTER_CURRENCY}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_COUNTER_CURRENCY}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedTaxlotColumnStyle}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.COUNTER_CURRENCY_AMOUNT}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_COUNTER_CURRENCY_AMOUNT}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedTaxlotColumnStyle}"/>
                        <!--Custom:Field Name="{x:Static Constants:AllocationUIConstants.AVGPRICE_BASE}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_AVGPRICE_BASE}" BindingType="Unbound" CellValuePresenterStyle="{StaticResource CalculatedTaxlotColumnStyle}"/-->
                        <Custom:TemplateField Name="{x:Static Constants:AllocationUIConstants.FX_CONVERSION_METHOD_OPERATOR}">
                            <Custom:TemplateField.DisplayTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{igEditors:TemplateEditorValueBinding}"/>
                                </DataTemplate>
                            </Custom:TemplateField.DisplayTemplate>
                            <Custom:TemplateField.EditTemplate>
                                <DataTemplate>
                                    <igEditors:XamComboEditor ItemsSource="{Binding Data.FxConversionOperator, Source={StaticResource proxy}}" DisplayMemberPath="DisplayText"
                                                                  IsAlwaysInEditMode="True"
                                                                  Value="{Binding Path=(igWPF:TemplateEditor.Editor).Value, RelativeSource={RelativeSource Self}, UpdateSourceTrigger=PropertyChanged,  Converter={StaticResource EnumToEnumerationValueConverter}, ConverterParameter='FxConversionOperator'}"/>
                                </DataTemplate>
                            </Custom:TemplateField.EditTemplate>
                        </Custom:TemplateField>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TAXLOT_ID}" HorizontalContentAlignment="Right"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.SETTLEMENT_CURRENCY}" Label="{x:Static Constants:AllocationUIConstants.CAPTION_SETTLEMENT_CURRENCY}" AllowEdit="False" BindingType="Unbound"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute1}" Label="{Binding Data.TradeAttributeCaption1, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute2}" Label="{Binding Data.TradeAttributeCaption2, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute3}" Label="{Binding Data.TradeAttributeCaption3, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute4}" Label="{Binding Data.TradeAttributeCaption4, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute5}" Label="{Binding Data.TradeAttributeCaption5, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute6}" Label="{Binding Data.TradeAttributeCaption6, Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute7}" Label="{Binding Data.AdditionalTradeAttributesCaptions[7], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute8}" Label="{Binding Data.AdditionalTradeAttributesCaptions[8], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute9}" Label="{Binding Data.AdditionalTradeAttributesCaptions[9], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute10}" Label="{Binding Data.AdditionalTradeAttributesCaptions[10], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute11}" Label="{Binding Data.AdditionalTradeAttributesCaptions[11], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute12}" Label="{Binding Data.AdditionalTradeAttributesCaptions[12], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute13}" Label="{Binding Data.AdditionalTradeAttributesCaptions[13], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute14}" Label="{Binding Data.AdditionalTradeAttributesCaptions[14], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute15}" Label="{Binding Data.AdditionalTradeAttributesCaptions[15], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute16}" Label="{Binding Data.AdditionalTradeAttributesCaptions[16], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute17}" Label="{Binding Data.AdditionalTradeAttributesCaptions[17], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute18}" Label="{Binding Data.AdditionalTradeAttributesCaptions[18], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute19}" Label="{Binding Data.AdditionalTradeAttributesCaptions[19], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute20}" Label="{Binding Data.AdditionalTradeAttributesCaptions[20], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute21}" Label="{Binding Data.AdditionalTradeAttributesCaptions[21], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute22}" Label="{Binding Data.AdditionalTradeAttributesCaptions[22], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute23}" Label="{Binding Data.AdditionalTradeAttributesCaptions[23], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute24}" Label="{Binding Data.AdditionalTradeAttributesCaptions[24], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute25}" Label="{Binding Data.AdditionalTradeAttributesCaptions[25], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute26}" Label="{Binding Data.AdditionalTradeAttributesCaptions[26], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute27}" Label="{Binding Data.AdditionalTradeAttributesCaptions[27], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute28}" Label="{Binding Data.AdditionalTradeAttributesCaptions[28], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute29}" Label="{Binding Data.AdditionalTradeAttributesCaptions[29], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute30}" Label="{Binding Data.AdditionalTradeAttributesCaptions[30], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute31}" Label="{Binding Data.AdditionalTradeAttributesCaptions[31], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute32}" Label="{Binding Data.AdditionalTradeAttributesCaptions[32], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute33}" Label="{Binding Data.AdditionalTradeAttributesCaptions[33], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute34}" Label="{Binding Data.AdditionalTradeAttributesCaptions[34], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute35}" Label="{Binding Data.AdditionalTradeAttributesCaptions[35], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute36}" Label="{Binding Data.AdditionalTradeAttributesCaptions[36], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute37}" Label="{Binding Data.AdditionalTradeAttributesCaptions[37], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute38}" Label="{Binding Data.AdditionalTradeAttributesCaptions[38], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute39}" Label="{Binding Data.AdditionalTradeAttributesCaptions[39], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute40}" Label="{Binding Data.AdditionalTradeAttributesCaptions[40], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute41}" Label="{Binding Data.AdditionalTradeAttributesCaptions[41], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute42}" Label="{Binding Data.AdditionalTradeAttributesCaptions[42], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute43}" Label="{Binding Data.AdditionalTradeAttributesCaptions[43], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute44}" Label="{Binding Data.AdditionalTradeAttributesCaptions[44], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TradeAttribute45}" Label="{Binding Data.AdditionalTradeAttributesCaptions[45], Source={StaticResource proxy}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                    </Custom:FieldLayout>
            </Custom:XamDataGrid.FieldLayouts>
            <Custom:XamDataGrid.ContextMenu>
                    <ContextMenu Visibility="Visible">
                        <MenuItem Header="UnAllocate" IsEnabled="{Binding Path=UnallocateMenuVisibility}" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_UNALLOCATE}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Ungroup" IsEnabled="{Binding Path=IsAllocatedUnGroupMenuEnabled}" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_UNGROUP_ALLOCATED}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Export Data">
                        <MenuItem Header="All" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.EXPORTDATA_ALLOCATED}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Groups" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.EXPORTDATA_GROUPS}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Taxlots" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.EXPORTDATA_TAXLOTS}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        </MenuItem>
                        <MenuItem Header="Save Layout" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_SAVE_LAYOUT}"></Binding>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.ALLOCATED_GRID}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Generate Cash Transaction" Visibility="{Binding Path=TaxlotMenuItemVisibility, Mode=TwoWay}" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_GENERATE_CASH_TRANSACTION}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Close Order" IsEnabled="{Binding Path=IsAllocatedCloseOrderEnabled}" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_CLOSE_ORDER}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Security Master" IsEnabled="{Binding Path=IsAllocatedSecurityMasterEnabled}" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_SYMBOL_LOOKUP}"></Binding>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.ALLOCATED_GRID}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Audit Trail" IsEnabled="{Binding Path=IsAllocatedAuditTrailEnabled}" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_AUDIT_TRAIL}"></Binding>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.ALLOCATED_GRID}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Expand/ Collapse All" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.MENU_EXPAND_COLLAPSE}"></Binding>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.ALLOCATED_GRID}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                        <MenuItem Header="Clear Filters" Command="{Binding Path=ContextMenuClicked }">
                            <MenuItem.CommandParameter>
                                <MultiBinding Converter="{StaticResource MultipleParameterConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.CLEAR_FILTERS}"></Binding>
                                        <Binding Source="{x:Static Constants:AllocationClientConstants.ALLOCATED_GRID}"></Binding>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </MenuItem.CommandParameter>
                        </MenuItem>
                    </ContextMenu>
                </Custom:XamDataGrid.ContextMenu>
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="CellActivated">
                        <i:InvokeCommandAction Command="{Binding Path=AllocationGroupClicked, Mode=TwoWay}" CommandParameter="{Binding Path=ActiveDataItem, RelativeSource={RelativeSource AncestorType={x:Type Custom:XamDataGrid}}}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </Custom:XamDataGrid>
    </Grid>
    </Grid>
</UserControl>