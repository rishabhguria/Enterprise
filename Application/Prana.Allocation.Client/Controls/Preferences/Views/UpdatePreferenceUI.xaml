<Window x:Class="Prana.Allocation.Client.Controls.Preferences.Views.UpdatePreferenceUI"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="UpdatePreferenceUI" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:local="clr-namespace:Prana.Allocation.Client.Controls.Preferences.Views"
        xmlns:viewModels="clr-namespace:Prana.Allocation.Client.Controls.Preferences.ViewModels"
        xmlns:ig="http://infragistics.com/Themes"
        xmlns:customChromeLibrary="clr-namespace:Prana.CustomChromeLibrary;assembly=Prana.CustomChromeLibrary"
        xmlns:shell="http://schemas.microsoft.com/winfx/2006/xaml/presentation/shell"
        mc:Ignorable="d" 
        Name="UpdatePreferenceWindow"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        Height="494" 
        Width="1010"
        WindowState="{Binding Path=BringToFront, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
        DataContext="{DynamicResource UpdatePreferenceUIViewModel}"  Background="{DynamicResource UserControlBackGround}">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.Allocation.Client;component/NirvanaSkin.xaml"/>

                <ig:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <ig:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamComboEditor.xaml" />
                    </ig:ResourceWasher.SourceDictionary>
                </ig:ResourceWasher>
                <ig:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <ig:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamDockManager.xaml" />
                    </ig:ResourceWasher.SourceDictionary>
                </ig:ResourceWasher>
                <ig:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <ig:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamEditors.xaml" />
                    </ig:ResourceWasher.SourceDictionary>
                </ig:ResourceWasher>
                <ig:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <ig:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamGrid.xaml" />
                    </ig:ResourceWasher.SourceDictionary>
                </ig:ResourceWasher>
                <ig:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <ig:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMenu.xaml" />
                    </ig:ResourceWasher.SourceDictionary>
                </ig:ResourceWasher>
                <ig:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <ig:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMultiColumnCombo.xaml" />
                    </ig:ResourceWasher.SourceDictionary>
                </ig:ResourceWasher>
            </ResourceDictionary.MergedDictionaries>
            <viewModels:UpdatePreferenceUIViewModel x:Key="UpdatePreferenceUIViewModel" />
        </ResourceDictionary>
    </Window.Resources>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding Path=UpdatePreferenceUILoaded }"/>
        </i:EventTrigger>
        <i:EventTrigger EventName="Closing">
            <i:InvokeCommandAction Command="{Binding Path=UpdatePreferenceUIClosing}" PassEventArgsToCommand="True" />
        </i:EventTrigger>
    </i:Interaction.Triggers>

    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome
            ResizeBorderThickness="6"
            CaptionHeight="22"
            CornerRadius="5"
            GlassFrameThickness="0">
        </shell:WindowChrome>
    </shell:WindowChrome.WindowChrome>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <!--provide the background for the entire form.  In practice, this appears as the window's resize border, because the title and window content obscure the rest-->
        <Border CornerRadius="2" Grid.RowSpan="2" BorderThickness="5" BorderBrush="#FF212C39" Background="#FFD1D2D4"/>

        <!--title bar-->
        <Border CornerRadius="2" BorderThickness="1" BorderBrush="#FF212C39" Background="#FF212C39">
            <!--Window Icon and Title-->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left">
                <TextBlock Height="22" Margin="5,0,0,0" Foreground="#FFD1D2D4" VerticalAlignment="Center">
                    <TextBlock.Style>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="FontSize" Value="15"/>
                            <Setter Property="Text" Value="Nirvāna"/>
                            <Setter Property="FontFamily" Value="Mulish"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding BringToFront}" Value="Minimized">
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Text" Value="Update Preferences"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StackPanel>

        </Border>

        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
            <TextBlock Text="Update General Rule Preference" Height="22" FontSize="15" Foreground="#FF8ABB54" VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock.Style>
                    <Style TargetType="{x:Type TextBlock}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding BringToFront}" Value="Minimized">
                                <Setter Property="Text" Value=""/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            <customChromeLibrary:CaptionButtons  VerticalAlignment="Center"/>
        </StackPanel>
        <!--min/max/close buttons-->

        <Grid Grid.Row="1" Margin="5">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <GroupBox Name="AccountStrategy" Grid.Row="0" Header="Account Strategy Distribution" Margin="5" BorderBrush="{DynamicResource GroupBoxBorder}">
                <local:PreferenceAccountStrategyControl  DataContext="{Binding Path=PreferenceAccountStrategyControlViewModel}" Margin="5"/>
            </GroupBox>
            <GroupBox Name="gboxDefaultRule" Grid.Row="1" Header="Default Rule" Margin="5" BorderBrush="{DynamicResource GroupBoxBorder}">
                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                    <local:CalculatedPreferenceDefaultRuleControl DataContext="{Binding Path=CalculatedPreferenceDefaultRuleControlViewModel}"/>
                </ScrollViewer>
            </GroupBox>
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Button Content="Update"  Grid.Column="1" Margin="5,5,5,5" Width="75" Template="{DynamicResource ButtonControlTemplate}" Foreground="{DynamicResource ButtonForeground}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Click">
                            <i:InvokeCommandAction Command="{Binding UpdatePreferenceDataCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>
                <Button Content="Close" Grid.Column="2" Margin="5,5,5,5" Width="75" Template="{DynamicResource RedButtonSkinTemplate}" Foreground="{DynamicResource ButtonForeground}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Click">
                            <i:InvokeCommandAction Command="{Binding CloseUpdatePreferenceUICommand}" CommandParameter="{Binding ElementName=UpdatePreferenceWindow}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>
            </Grid>
            <StatusBar Grid.Row="3" Background="{DynamicResource StatusBarBackground}" Foreground="{DynamicResource StatusBarForeground}">
                <StatusBarItem Foreground="{DynamicResource StatusBarForeground}">
                    <TextBlock Text="{Binding StatusBarText}"/>
                </StatusBarItem>
            </StatusBar>
        </Grid>
    </Grid>
</Window>
