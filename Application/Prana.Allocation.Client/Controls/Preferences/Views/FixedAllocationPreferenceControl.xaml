<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:Custom="http://infragistics.com/DataPresenter" 
             x:Class="Prana.Allocation.Client.Controls.Preferences.Views.FixedAllocationPreferenceControl" 
             xmlns:viewModels="clr-namespace:Prana.Allocation.Client.Controls.Preferences.ViewModels"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:themes="http://infragistics.com/Themes"
             xmlns:behaviours="clr-namespace:Prana.Allocation.Client.Controls.Preferences.Behaviours"
             xmlns:commonBehaviours="clr-namespace:Prana.Allocation.Client.Behaviours"   
             mc:Ignorable="d" 
             d:DesignHeight="300"
             xmlns:igExcelExporter="http://infragistics.com/ExcelExporter"
             xmlns:Constants="clr-namespace:Prana.Allocation.Client.Constants"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:igEditors="http://infragistics.com/Editors"
             DataContext="{DynamicResource FixedAllocationPreferenceControlViewModel}" Background="{DynamicResource UserControlBackGround}">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Prana.Allocation.Client;component/NirvanaSkin.xaml"/>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamComboEditor.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamDockManager.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamEditors.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamGrid.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMenu.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>
                <themes:ResourceWasher WashMode="HueSaturationReplacement" WashColor="#FF6D6D6D">
                    <themes:ResourceWasher.SourceDictionary>
                        <ResourceDictionary Source="/Prana.Allocation.Client;component/Themes/IG/IG.xamMultiColumnCombo.xaml" />
                    </themes:ResourceWasher.SourceDictionary>
                </themes:ResourceWasher>

            </ResourceDictionary.MergedDictionaries>
            <Style TargetType="{x:Type Custom:LabelPresenter}">
                <Setter Property="ContentTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}" TextTrimming="CharacterEllipsis" ToolTip="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}" />
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style  TargetType="{x:Type igEditors:XamNumericEditor}">
                <Setter Property="Mask" Value="{}{char:15:-0-9.}"/>
                <Setter Property="PromptChar" Value=""/>
            </Style>
            <viewModels:FixedAllocationPreferenceControlViewModel x:Key="FixedAllocationPreferenceControlViewModel"/>
            <igExcelExporter:DataPresenterExcelExporter x:Key="Exporter"/>
            <Style TargetType="Button" x:Key="{x:Static Custom:RecordExportStatusControl.CancelExportButtonStyleKey}">
                <Setter Property="Height" Value="14" />
                <Setter Property="Width" Value="14" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <TextBlock Text="X" Visibility="Hidden" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
        </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"  MinWidth="25"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <ComboBox Name="cbFixedAllocationPreference" Grid.Column="1" MinWidth="100" ToolTip="{Binding SelectedItem.Value, RelativeSource={RelativeSource Self}}" IsEditable="True" IsReadOnly="True" Margin="5,5,5,5" SelectedItem="{Binding Path=SelectedfixedAllocationPreference}" ItemsSource="{Binding Path=FixedAllocationPreferences}" DisplayMemberPath="Value" IsSynchronizedWithCurrentItem="True" Template="{DynamicResource ComboBoxEditableTemplate}">
                <ComboBox.ItemContainerStyle>
                    <Style>
                        <Setter Property="Control.ToolTip" Value="{Binding Value}" />
                    </Style>
                </ComboBox.ItemContainerStyle>
            </ComboBox>
            <Button Name="btnGetScheme" Content="Get Scheme" Grid.Column="3" Width="100" Margin="5,5,5,5" Template="{DynamicResource ButtonControlTemplate}" Foreground="{DynamicResource ButtonForeground}">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click">
                        <i:InvokeCommandAction Command="{Binding Path=LoadFixedPreferenceGridCommand}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </Button>
        </Grid>
        <Custom:XamDataGrid x:Name="FixedPreferenceGrid" Grid.Row="1" Margin="5,5,5,5" GroupByAreaLocation="None" DataContext="{Binding DataProvider}" DataSource="{Binding XPath=PositionMaster, Mode=TwoWay}"  Background="{DynamicResource XamDataGridBackground}">
            <Custom:XamDataGrid.FieldLayoutSettings>
                <Custom:FieldLayoutSettings FilterUIType="LabelIcons" HighlightAlternateRecords="True"/>
            </Custom:XamDataGrid.FieldLayoutSettings>
            <Custom:XamDataGrid.FieldSettings>
                <Custom:FieldSettings AllowRecordFiltering="True" CellClickAction="SelectRecord"/>
            </Custom:XamDataGrid.FieldSettings>
            <Custom:XamDataGrid.Resources>
                <Style TargetType="{x:Type Custom:FilterButton}" BasedOn="{StaticResource FilterIcon}"/>
            </Custom:XamDataGrid.Resources>
            <i:Interaction.Behaviors>
                <commonBehaviours:XamDataGridExporter ExportGrid="{Binding Path=DataContext.ExportGrid, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ExporterResource="{Binding Mode=OneWay, Source={StaticResource Exporter}}"/>
                <behaviours:AllocationFixedPreferencesGridBehavior IsModified="{Binding Path=DataContext.IsModified, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            </i:Interaction.Behaviors>
            <Custom:XamDataGrid.FieldLayouts>
                <Custom:FieldLayout>
                    <Custom:Field Name="{x:Static Constants:AllocationUIConstants.TOTAL_QUANTITY}" EditorStyle="{StaticResource {x:Type igEditors:XamNumericEditor}}"/>
                </Custom:FieldLayout>
            </Custom:XamDataGrid.FieldLayouts>
        </Custom:XamDataGrid>
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button Name="btnFixedPreferenceExport" Content="Export" Grid.Column="1" Width="75" Margin="5,5,5,5" Template="{DynamicResource ButtonControlTemplate}" Foreground="{DynamicResource ButtonForeground}">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click">
                        <i:InvokeCommandAction Command="{Binding Path=ExportAllocationSchemeCommand}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </Button>
            <Button Name="btnFixedPreferenceDelete" Content="Delete" Grid.Column="2" Width="75" Margin="5,5,5,5" Template="{DynamicResource RedButtonSkinTemplate}" Foreground="{DynamicResource ButtonForeground}">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click">
                        <i:InvokeCommandAction Command="{Binding Path=DeleteAllocationSchemeCommand}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </Button>
        </Grid>
    </Grid>
</UserControl>
